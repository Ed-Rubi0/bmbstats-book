<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 14 Predictive tasks using bmbstats | bmbstats: bootstrap magnitude-based statistics for sports scientists</title>
  <meta name="description" content="Chapter 14 Predictive tasks using bmbstats | bmbstats: bootstrap magnitude-based statistics for sports scientists" />
  <meta name="generator" content="bookdown 0.20.2 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 14 Predictive tasks using bmbstats | bmbstats: bootstrap magnitude-based statistics for sports scientists" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="mladenjovanovic.github.io/bmbstats-book" />
  
  
  <meta name="github-repo" content="mladenjovanovic/bmbstats-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 14 Predictive tasks using bmbstats | bmbstats: bootstrap magnitude-based statistics for sports scientists" />
  <meta name="twitter:site" content="@physical_prep" />
  
  

<meta name="author" content="Mladen Jovanovic" />


<meta name="date" content="2020-07-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="descriptive-tasks-using-bmbstats.html"/>
<link rel="next" href="validity-and-reliability.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="adv-r.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">bmbstats book</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#r-and-r-packages"><i class="fa fa-check"></i>R and R packages</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
</ul></li>
<li class="part"><span><b>I Part One</b></span></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="description.html"><a href="description.html"><i class="fa fa-check"></i><b>2</b> Description</a>
<ul>
<li class="chapter" data-level="2.1" data-path="description.html"><a href="description.html#comparing-two-independent-groups"><i class="fa fa-check"></i><b>2.1</b> Comparing two independent groups</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="description.html"><a href="description.html#sample-mean-as-the-simplest-statistical-model"><i class="fa fa-check"></i><b>2.1.1</b> Sample <code>mean</code> as the simplest statistical model</a></li>
<li class="chapter" data-level="2.1.2" data-path="description.html"><a href="description.html#effect-sizes"><i class="fa fa-check"></i><b>2.1.2</b> Effect Sizes</a></li>
<li class="chapter" data-level="2.1.3" data-path="description.html"><a href="description.html#the-smallest-effect-size-of-interest"><i class="fa fa-check"></i><b>2.1.3</b> The Smallest Effect Size Of Interest</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="description.html"><a href="description.html#comparing-dependent-groups"><i class="fa fa-check"></i><b>2.2</b> Comparing dependent groups</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="description.html"><a href="description.html#describing-groups-as-independent"><i class="fa fa-check"></i><b>2.2.1</b> Describing groups as independent</a></li>
<li class="chapter" data-level="2.2.2" data-path="description.html"><a href="description.html#effect-sizes-1"><i class="fa fa-check"></i><b>2.2.2</b> Effect Sizes</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="description.html"><a href="description.html#describing-relationship-between-two-variables"><i class="fa fa-check"></i><b>2.3</b> Describing relationship between two variables</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="description.html"><a href="description.html#magnitude-based-estimators"><i class="fa fa-check"></i><b>2.3.1</b> Magnitude-based estimators</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="description.html"><a href="description.html#advanced-uses"><i class="fa fa-check"></i><b>2.4</b> Advanced uses</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="prediction.html"><a href="prediction.html"><i class="fa fa-check"></i><b>3</b> Prediction</a>
<ul>
<li class="chapter" data-level="3.1" data-path="prediction.html"><a href="prediction.html#overfitting"><i class="fa fa-check"></i><b>3.1</b> Overfitting</a></li>
<li class="chapter" data-level="3.2" data-path="prediction.html"><a href="prediction.html#cross-validation"><i class="fa fa-check"></i><b>3.2</b> Cross-Validation</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="prediction.html"><a href="prediction.html#sample-mean-as-the-simplest-predictive-model"><i class="fa fa-check"></i><b>3.2.1</b> Sample <code>mean</code> as the simplest predictive model</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="prediction.html"><a href="prediction.html#bias-variance-decomposition-and-trade-off"><i class="fa fa-check"></i><b>3.3</b> Bias-Variance decomposition and trade-off</a></li>
<li class="chapter" data-level="3.4" data-path="prediction.html"><a href="prediction.html#interpretability"><i class="fa fa-check"></i><b>3.4</b> Interpretability</a></li>
<li class="chapter" data-level="3.5" data-path="prediction.html"><a href="prediction.html#magnitude-based-prediction-estimators"><i class="fa fa-check"></i><b>3.5</b> Magnitude-based prediction estimators</a></li>
<li class="chapter" data-level="3.6" data-path="prediction.html"><a href="prediction.html#practical-example-mas-and-yoyoir1-prediction"><i class="fa fa-check"></i><b>3.6</b> Practical example: MAS and YoYoIR1 prediction</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="prediction.html"><a href="prediction.html#predicting-mas-from-yoyoir1"><i class="fa fa-check"></i><b>3.6.1</b> Predicting MAS from YoYoIR1</a></li>
<li class="chapter" data-level="3.6.2" data-path="prediction.html"><a href="prediction.html#predicting-yoyoir1-from-mas"><i class="fa fa-check"></i><b>3.6.2</b> Predicting YoYoIR1 from MAS</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="causal-inference.html"><a href="causal-inference.html"><i class="fa fa-check"></i><b>4</b> Causal inference</a>
<ul>
<li class="chapter" data-level="4.1" data-path="causal-inference.html"><a href="causal-inference.html#necessary-versus-sufficient-causality"><i class="fa fa-check"></i><b>4.1</b> Necessary versus sufficient causality</a></li>
<li class="chapter" data-level="4.2" data-path="causal-inference.html"><a href="causal-inference.html#observational-data"><i class="fa fa-check"></i><b>4.2</b> Observational data</a></li>
<li class="chapter" data-level="4.3" data-path="causal-inference.html"><a href="causal-inference.html#potential-outcomes-or-counterfactuals"><i class="fa fa-check"></i><b>4.3</b> Potential outcomes or counterfactuals</a></li>
<li class="chapter" data-level="4.4" data-path="causal-inference.html"><a href="causal-inference.html#ceteris-paribus-and-the-biases"><i class="fa fa-check"></i><b>4.4</b> <em>Ceteris paribus</em> and the biases</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="causal-inference.html"><a href="causal-inference.html#randomization"><i class="fa fa-check"></i><b>4.4.1</b> Randomization</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="causal-inference.html"><a href="causal-inference.html#subject-matter-knowledge"><i class="fa fa-check"></i><b>4.5</b> Subject matter knowledge</a></li>
<li class="chapter" data-level="4.6" data-path="causal-inference.html"><a href="causal-inference.html#example-of-randomized-control-trial"><i class="fa fa-check"></i><b>4.6</b> Example of randomized control trial</a></li>
<li class="chapter" data-level="4.7" data-path="causal-inference.html"><a href="causal-inference.html#prediction-as-a-complement-to-causal-inference"><i class="fa fa-check"></i><b>4.7</b> Prediction as a complement to causal inference</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="causal-inference.html"><a href="causal-inference.html#analysis-of-the-individual-residuals-responders-vs-non-responders"><i class="fa fa-check"></i><b>4.7.1</b> Analysis of the individual residuals: responders vs non-responders</a></li>
<li class="chapter" data-level="4.7.2" data-path="causal-inference.html"><a href="causal-inference.html#counterfactual-analysis-and-individual-treatment-effects"><i class="fa fa-check"></i><b>4.7.2</b> Counterfactual analysis and Individual Treatment Effects</a></li>
<li class="chapter" data-level="4.7.3" data-path="causal-inference.html"><a href="causal-inference.html#direct-and-indirect-effect-covariates-and-then-some"><i class="fa fa-check"></i><b>4.7.3</b> Direct and indirect effect, covariates and then some</a></li>
<li class="chapter" data-level="4.7.4" data-path="causal-inference.html"><a href="causal-inference.html#model-selection"><i class="fa fa-check"></i><b>4.7.4</b> Model selection</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="causal-inference.html"><a href="causal-inference.html#ergodicity"><i class="fa fa-check"></i><b>4.8</b> Ergodicity</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="statistical-inference.html"><a href="statistical-inference.html"><i class="fa fa-check"></i><b>5</b> Statistical inference</a>
<ul>
<li class="chapter" data-level="5.1" data-path="statistical-inference.html"><a href="statistical-inference.html#two-kinds-of-uncertainty-two-kinds-of-probability-two-kinds-of-statistical-inference"><i class="fa fa-check"></i><b>5.1</b> Two kinds of uncertainty, two kinds of probability, two kinds of statistical inference</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="frequentist-perspective.html"><a href="frequentist-perspective.html"><i class="fa fa-check"></i><b>6</b> Frequentist perspective</a>
<ul>
<li class="chapter" data-level="6.1" data-path="frequentist-perspective.html"><a href="frequentist-perspective.html#null-hypothesis-significance-testing"><i class="fa fa-check"></i><b>6.1</b> Null-Hypothesis Significance Testing</a></li>
<li class="chapter" data-level="6.2" data-path="frequentist-perspective.html"><a href="frequentist-perspective.html#statistical-power"><i class="fa fa-check"></i><b>6.2</b> Statistical Power</a></li>
<li class="chapter" data-level="6.3" data-path="frequentist-perspective.html"><a href="frequentist-perspective.html#new-statistics-confidence-intervals-and-estimation"><i class="fa fa-check"></i><b>6.3</b> New Statistics: Confidence Intervals and Estimation</a></li>
<li class="chapter" data-level="6.4" data-path="frequentist-perspective.html"><a href="frequentist-perspective.html#minimum-effect-tests"><i class="fa fa-check"></i><b>6.4</b> Minimum Effect Tests</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="frequentist-perspective.html"><a href="frequentist-perspective.html#individual-vs.-parameter-sesoi"><i class="fa fa-check"></i><b>6.4.1</b> Individual vs. Parameter SESOI</a></li>
<li class="chapter" data-level="6.4.2" data-path="frequentist-perspective.html"><a href="frequentist-perspective.html#two-one-sided-tests-of-equivalence"><i class="fa fa-check"></i><b>6.4.2</b> Two one-sided tests of equivalence</a></li>
<li class="chapter" data-level="6.4.3" data-path="frequentist-perspective.html"><a href="frequentist-perspective.html#superiority-and-non-inferiority"><i class="fa fa-check"></i><b>6.4.3</b> Superiority and Non-Inferiority</a></li>
<li class="chapter" data-level="6.4.4" data-path="frequentist-perspective.html"><a href="frequentist-perspective.html#inferiority-and-non-superiority"><i class="fa fa-check"></i><b>6.4.4</b> Inferiority and Non-Superiority</a></li>
<li class="chapter" data-level="6.4.5" data-path="frequentist-perspective.html"><a href="frequentist-perspective.html#inference-from-mets"><i class="fa fa-check"></i><b>6.4.5</b> Inference from METs</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="frequentist-perspective.html"><a href="frequentist-perspective.html#magnitude-based-inference"><i class="fa fa-check"></i><b>6.5</b> Magnitude Based Inference</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="bayesian-perspective.html"><a href="bayesian-perspective.html"><i class="fa fa-check"></i><b>7</b> Bayesian perspective</a>
<ul>
<li class="chapter" data-level="7.1" data-path="bayesian-perspective.html"><a href="bayesian-perspective.html#grid-approximation"><i class="fa fa-check"></i><b>7.1</b> Grid approximation</a></li>
<li class="chapter" data-level="7.2" data-path="bayesian-perspective.html"><a href="bayesian-perspective.html#priors"><i class="fa fa-check"></i><b>7.2</b> Priors</a></li>
<li class="chapter" data-level="7.3" data-path="bayesian-perspective.html"><a href="bayesian-perspective.html#likelihood-function"><i class="fa fa-check"></i><b>7.3</b> Likelihood function</a></li>
<li class="chapter" data-level="7.4" data-path="bayesian-perspective.html"><a href="bayesian-perspective.html#posterior-probability"><i class="fa fa-check"></i><b>7.4</b> Posterior probability</a></li>
<li class="chapter" data-level="7.5" data-path="bayesian-perspective.html"><a href="bayesian-perspective.html#adding-more-possibilities"><i class="fa fa-check"></i><b>7.5</b> Adding more possibilities</a></li>
<li class="chapter" data-level="7.6" data-path="bayesian-perspective.html"><a href="bayesian-perspective.html#different-prior"><i class="fa fa-check"></i><b>7.6</b> Different prior</a></li>
<li class="chapter" data-level="7.7" data-path="bayesian-perspective.html"><a href="bayesian-perspective.html#more-data"><i class="fa fa-check"></i><b>7.7</b> More data</a></li>
<li class="chapter" data-level="7.8" data-path="bayesian-perspective.html"><a href="bayesian-perspective.html#summarizing-prior-and-posterior-distributions-with-map-and-hdi"><i class="fa fa-check"></i><b>7.8</b> Summarizing prior and posterior distributions with MAP and HDI</a></li>
<li class="chapter" data-level="7.9" data-path="bayesian-perspective.html"><a href="bayesian-perspective.html#comparison-to-nhst-type-i-errors"><i class="fa fa-check"></i><b>7.9</b> Comparison to NHST Type I errors</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="bootstrap.html"><a href="bootstrap.html"><i class="fa fa-check"></i><b>8</b> Bootstrap</a>
<ul>
<li class="chapter" data-level="8.1" data-path="bootstrap.html"><a href="bootstrap.html#summarizing-bootstrap-distribution"><i class="fa fa-check"></i><b>8.1</b> Summarizing bootstrap distribution</a></li>
<li class="chapter" data-level="8.2" data-path="bootstrap.html"><a href="bootstrap.html#bootstrap-type-i-errors"><i class="fa fa-check"></i><b>8.2</b> Bootstrap Type I errors</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="statistical-inference-conclusion.html"><a href="statistical-inference-conclusion.html"><i class="fa fa-check"></i><b>9</b> Statistical inference conclusion</a></li>
<li class="chapter" data-level="10" data-path="measurement-error.html"><a href="measurement-error.html"><i class="fa fa-check"></i><b>10</b> Measurement Error</a>
<ul>
<li class="chapter" data-level="10.1" data-path="measurement-error.html"><a href="measurement-error.html#estimating-te-using-ordinary-least-products-regression"><i class="fa fa-check"></i><b>10.1</b> Estimating <code>TE</code> using <em>ordinary least products</em> regression</a></li>
<li class="chapter" data-level="10.2" data-path="measurement-error.html"><a href="measurement-error.html#smallest-detectable-change"><i class="fa fa-check"></i><b>10.2</b> Smallest Detectable Change</a></li>
<li class="chapter" data-level="10.3" data-path="measurement-error.html"><a href="measurement-error.html#interpreting-individual-changes-using-sesoi-and-sdc"><i class="fa fa-check"></i><b>10.3</b> Interpreting individual changes using SESOI and SDC</a></li>
<li class="chapter" data-level="10.4" data-path="measurement-error.html"><a href="measurement-error.html#what-to-do-when-we-know-the-error"><i class="fa fa-check"></i><b>10.4</b> What to do when we know the error?</a></li>
<li class="chapter" data-level="10.5" data-path="measurement-error.html"><a href="measurement-error.html#extending-the-classical-test-theory"><i class="fa fa-check"></i><b>10.5</b> Extending the Classical Test Theory</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>11</b> Conclusion</a></li>
<li class="part"><span><b>II Part Two</b></span></li>
<li class="chapter" data-level="12" data-path="bmbstats-bootstrap-magnitude-based-statistics-package.html"><a href="bmbstats-bootstrap-magnitude-based-statistics-package.html"><i class="fa fa-check"></i><b>12</b> <code>bmbstats</code>: Bootstrap Magnitude-based Statistics package</a>
<ul>
<li class="chapter" data-level="12.1" data-path="bmbstats-bootstrap-magnitude-based-statistics-package.html"><a href="bmbstats-bootstrap-magnitude-based-statistics-package.html#bmbstats-installation"><i class="fa fa-check"></i><b>12.1</b> <code>bmbstats</code> Installation</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="descriptive-tasks-using-bmbstats.html"><a href="descriptive-tasks-using-bmbstats.html"><i class="fa fa-check"></i><b>13</b> Descriptive tasks using <code>bmbstats</code></a>
<ul>
<li class="chapter" data-level="13.1" data-path="descriptive-tasks-using-bmbstats.html"><a href="descriptive-tasks-using-bmbstats.html#generating-height-data"><i class="fa fa-check"></i><b>13.1</b> Generating <em>height data</em></a></li>
<li class="chapter" data-level="13.2" data-path="descriptive-tasks-using-bmbstats.html"><a href="descriptive-tasks-using-bmbstats.html#visualization-and-analysis-of-a-single-groupvariable"><i class="fa fa-check"></i><b>13.2</b> Visualization and analysis of a single group/variable</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="descriptive-tasks-using-bmbstats.html"><a href="descriptive-tasks-using-bmbstats.html#using-your-own-estimators"><i class="fa fa-check"></i><b>13.2.1</b> Using your own estimators</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="descriptive-tasks-using-bmbstats.html"><a href="descriptive-tasks-using-bmbstats.html#visualization-and-analysis-of-the-two-independent-groups"><i class="fa fa-check"></i><b>13.3</b> Visualization and analysis of the two independent groups</a></li>
<li class="chapter" data-level="13.4" data-path="descriptive-tasks-using-bmbstats.html"><a href="descriptive-tasks-using-bmbstats.html#nhst-mets-and-mbi-functions"><i class="fa fa-check"></i><b>13.4</b> NHST, METs and MBI functions</a></li>
<li class="chapter" data-level="13.5" data-path="descriptive-tasks-using-bmbstats.html"><a href="descriptive-tasks-using-bmbstats.html#comparing-two-dependent-groups"><i class="fa fa-check"></i><b>13.5</b> Comparing two dependent groups</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="descriptive-tasks-using-bmbstats.html"><a href="descriptive-tasks-using-bmbstats.html#measurement-error-issues"><i class="fa fa-check"></i><b>13.5.1</b> Measurement error issues</a></li>
<li class="chapter" data-level="13.5.2" data-path="descriptive-tasks-using-bmbstats.html"><a href="descriptive-tasks-using-bmbstats.html#analysis-of-the-dependent-groups-using-bmbstatscompare_dependent_groups"><i class="fa fa-check"></i><b>13.5.2</b> Analysis of the dependent groups using <code>bmbstats::compare_dependent_groups</code></a></li>
<li class="chapter" data-level="13.5.3" data-path="descriptive-tasks-using-bmbstats.html"><a href="descriptive-tasks-using-bmbstats.html#statistical-tests"><i class="fa fa-check"></i><b>13.5.3</b> Statistical tests</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="descriptive-tasks-using-bmbstats.html"><a href="descriptive-tasks-using-bmbstats.html#describing-relationship-between-two-groups"><i class="fa fa-check"></i><b>13.6</b> Describing relationship between two groups</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="predictive-tasks-using-bmbstats.html"><a href="predictive-tasks-using-bmbstats.html"><i class="fa fa-check"></i><b>14</b> Predictive tasks using <code>bmbstats</code></a>
<ul>
<li class="chapter" data-level="14.1" data-path="predictive-tasks-using-bmbstats.html"><a href="predictive-tasks-using-bmbstats.html#how-to-implement-different-performance-metrics"><i class="fa fa-check"></i><b>14.1</b> How to implement different performance metrics?</a></li>
<li class="chapter" data-level="14.2" data-path="predictive-tasks-using-bmbstats.html"><a href="predictive-tasks-using-bmbstats.html#how-to-use-different-prediction-model"><i class="fa fa-check"></i><b>14.2</b> How to use different prediction model?</a></li>
<li class="chapter" data-level="14.3" data-path="predictive-tasks-using-bmbstats.html"><a href="predictive-tasks-using-bmbstats.html#example-of-using-tuning-parameter"><i class="fa fa-check"></i><b>14.3</b> Example of using tuning parameter</a></li>
<li class="chapter" data-level="14.4" data-path="predictive-tasks-using-bmbstats.html"><a href="predictive-tasks-using-bmbstats.html#plotting"><i class="fa fa-check"></i><b>14.4</b> Plotting</a></li>
<li class="chapter" data-level="14.5" data-path="predictive-tasks-using-bmbstats.html"><a href="predictive-tasks-using-bmbstats.html#comparing-models"><i class="fa fa-check"></i><b>14.5</b> Comparing models</a></li>
<li class="chapter" data-level="14.6" data-path="predictive-tasks-using-bmbstats.html"><a href="predictive-tasks-using-bmbstats.html#bootstrapping-model"><i class="fa fa-check"></i><b>14.6</b> Bootstrapping model</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="validity-and-reliability.html"><a href="validity-and-reliability.html"><i class="fa fa-check"></i><b>15</b> Validity and Reliability</a>
<ul>
<li class="chapter" data-level="15.1" data-path="validity-and-reliability.html"><a href="validity-and-reliability.html#data-generation"><i class="fa fa-check"></i><b>15.1</b> Data generation</a></li>
<li class="chapter" data-level="15.2" data-path="validity-and-reliability.html"><a href="validity-and-reliability.html#validity"><i class="fa fa-check"></i><b>15.2</b> Validity</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="validity-and-reliability.html"><a href="validity-and-reliability.html#true-vs-criterion"><i class="fa fa-check"></i><b>15.2.1</b> True vs Criterion</a></li>
<li class="chapter" data-level="15.2.2" data-path="validity-and-reliability.html"><a href="validity-and-reliability.html#practical-vs-criterion"><i class="fa fa-check"></i><b>15.2.2</b> Practical vs Criterion</a></li>
<li class="chapter" data-level="15.2.3" data-path="validity-and-reliability.html"><a href="validity-and-reliability.html#prediction-approach"><i class="fa fa-check"></i><b>15.2.3</b> Prediction approach</a></li>
<li class="chapter" data-level="15.2.4" data-path="validity-and-reliability.html"><a href="validity-and-reliability.html#can-we-adjust-for-the-know-criterion-measure-random-error"><i class="fa fa-check"></i><b>15.2.4</b> Can we adjust for the know criterion measure random error?</a></li>
<li class="chapter" data-level="15.2.5" data-path="validity-and-reliability.html"><a href="validity-and-reliability.html#estimating-sesoi-for-the-practical-score"><i class="fa fa-check"></i><b>15.2.5</b> Estimating SESOI for the practical score</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="validity-and-reliability.html"><a href="validity-and-reliability.html#reliability"><i class="fa fa-check"></i><b>15.3</b> Reliability</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="validity-and-reliability.html"><a href="validity-and-reliability.html#reproducibility"><i class="fa fa-check"></i><b>15.3.1</b> Reproducibility</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="validity-and-reliability.html"><a href="validity-and-reliability.html#repeatability"><i class="fa fa-check"></i><b>15.4</b> Repeatability</a></li>
<li class="chapter" data-level="15.5" data-path="validity-and-reliability.html"><a href="validity-and-reliability.html#the-difference-between-reproducibility-and-repeatability"><i class="fa fa-check"></i><b>15.5</b> The difference between Reproducibility and Repeatability</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="rct-analysis-and-prediction-in-bmbstats.html"><a href="rct-analysis-and-prediction-in-bmbstats.html"><i class="fa fa-check"></i><b>16</b> RCT analysis and prediction in <code>bmbstats</code></a>
<ul>
<li class="chapter" data-level="16.1" data-path="rct-analysis-and-prediction-in-bmbstats.html"><a href="rct-analysis-and-prediction-in-bmbstats.html#data-generating-process-behind-rct"><i class="fa fa-check"></i><b>16.1</b> Data Generating Process behind RCT</a></li>
<li class="chapter" data-level="16.2" data-path="rct-analysis-and-prediction-in-bmbstats.html"><a href="rct-analysis-and-prediction-in-bmbstats.html#rct-analysis-using-bmbstatsrct_analysis-function"><i class="fa fa-check"></i><b>16.2</b> RCT analysis using <code>bmbstats::RCT_analysis</code> function</a></li>
<li class="chapter" data-level="16.3" data-path="rct-analysis-and-prediction-in-bmbstats.html"><a href="rct-analysis-and-prediction-in-bmbstats.html#linear-regression-perspective"><i class="fa fa-check"></i><b>16.3</b> Linear Regression Perspective</a></li>
<li class="chapter" data-level="16.4" data-path="rct-analysis-and-prediction-in-bmbstats.html"><a href="rct-analysis-and-prediction-in-bmbstats.html#prediction-perspective-1"><i class="fa fa-check"></i><b>16.4</b> Prediction perspective 1</a></li>
<li class="chapter" data-level="16.5" data-path="rct-analysis-and-prediction-in-bmbstats.html"><a href="rct-analysis-and-prediction-in-bmbstats.html#adding-some-effects"><i class="fa fa-check"></i><b>16.5</b> Adding some effects</a></li>
<li class="chapter" data-level="16.6" data-path="rct-analysis-and-prediction-in-bmbstats.html"><a href="rct-analysis-and-prediction-in-bmbstats.html#what-goes-inside-the-measurement-error-or-control-group-change-or-residuals-sd"><i class="fa fa-check"></i><b>16.6</b> What goes inside the <em>measurement error</em> (or Control group change or residuals <code>SD</code>)?</a></li>
<li class="chapter" data-level="16.7" data-path="rct-analysis-and-prediction-in-bmbstats.html"><a href="rct-analysis-and-prediction-in-bmbstats.html#prediction-perspective-2"><i class="fa fa-check"></i><b>16.7</b> Prediction perspective 2</a></li>
<li class="chapter" data-level="16.8" data-path="rct-analysis-and-prediction-in-bmbstats.html"><a href="rct-analysis-and-prediction-in-bmbstats.html#making-it-more-complex-by-adding-covariate"><i class="fa fa-check"></i><b>16.8</b> Making it more complex by adding covariate</a></li>
<li class="chapter" data-level="16.9" data-path="rct-analysis-and-prediction-in-bmbstats.html"><a href="rct-analysis-and-prediction-in-bmbstats.html#prediction-perspective-3"><i class="fa fa-check"></i><b>16.9</b> Prediction perspective 3</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="appendix-a-dorem-package.html"><a href="appendix-a-dorem-package.html"><i class="fa fa-check"></i><b>17</b> Appendix A: <code>dorem</code> package</a>
<ul>
<li class="chapter" data-level="17.1" data-path="appendix-a-dorem-package.html"><a href="appendix-a-dorem-package.html#dorem-installation"><i class="fa fa-check"></i><b>17.1</b> <code>dorem</code> Installation</a></li>
<li class="chapter" data-level="17.2" data-path="appendix-a-dorem-package.html"><a href="appendix-a-dorem-package.html#dorem-example"><i class="fa fa-check"></i><b>17.2</b> <code>dorem</code> Example</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="appendix-b-shorts-package.html"><a href="appendix-b-shorts-package.html"><i class="fa fa-check"></i><b>18</b> Appendix B: <code>shorts</code> package</a>
<ul>
<li class="chapter" data-level="18.1" data-path="appendix-b-shorts-package.html"><a href="appendix-b-shorts-package.html#shorts-installation"><i class="fa fa-check"></i><b>18.1</b> <code>shorts</code> Installation</a></li>
<li class="chapter" data-level="18.2" data-path="appendix-b-shorts-package.html"><a href="appendix-b-shorts-package.html#short-examples"><i class="fa fa-check"></i><b>18.2</b> <code>short</code> Examples</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="appendix-b-shorts-package.html"><a href="appendix-b-shorts-package.html#profiling-using-split-times"><i class="fa fa-check"></i><b>18.2.1</b> Profiling using split times</a></li>
<li class="chapter" data-level="18.2.2" data-path="appendix-b-shorts-package.html"><a href="appendix-b-shorts-package.html#profiling-using-radar-gun-data"><i class="fa fa-check"></i><b>18.2.2</b> Profiling using radar gun data</a></li>
<li class="chapter" data-level="18.2.3" data-path="appendix-b-shorts-package.html"><a href="appendix-b-shorts-package.html#using-corrections"><i class="fa fa-check"></i><b>18.2.3</b> Using corrections</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="appendix-c-vjsim-package.html"><a href="appendix-c-vjsim-package.html"><i class="fa fa-check"></i><b>19</b> Appendix C: <code>vjsim</code> package</a>
<ul>
<li class="chapter" data-level="19.1" data-path="appendix-c-vjsim-package.html"><a href="appendix-c-vjsim-package.html#vjsim-installation"><i class="fa fa-check"></i><b>19.1</b> <code>vjsim</code> Installation</a></li>
<li class="chapter" data-level="19.2" data-path="appendix-c-vjsim-package.html"><a href="appendix-c-vjsim-package.html#vjsim-usage"><i class="fa fa-check"></i><b>19.2</b> <code>vjsim</code> Usage</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="appendix-c-vjsim-package.html"><a href="appendix-c-vjsim-package.html#introduction-to-vjsim"><i class="fa fa-check"></i><b>19.2.1</b> <span>Introduction to vjsim</span></a></li>
<li class="chapter" data-level="19.2.2" data-path="appendix-c-vjsim-package.html"><a href="appendix-c-vjsim-package.html#simulation"><i class="fa fa-check"></i><b>19.2.2</b> <span>Simulation</span></a></li>
<li class="chapter" data-level="19.2.3" data-path="appendix-c-vjsim-package.html"><a href="appendix-c-vjsim-package.html#profiling"><i class="fa fa-check"></i><b>19.2.3</b> <span>Profiling</span></a></li>
<li class="chapter" data-level="19.2.4" data-path="appendix-c-vjsim-package.html"><a href="appendix-c-vjsim-package.html#optimization"><i class="fa fa-check"></i><b>19.2.4</b> <span>Optimization</span></a></li>
<li class="chapter" data-level="19.2.5" data-path="appendix-c-vjsim-package.html"><a href="appendix-c-vjsim-package.html#exploring"><i class="fa fa-check"></i><b>19.2.5</b> <span>Exploring</span></a></li>
<li class="chapter" data-level="19.2.6" data-path="appendix-c-vjsim-package.html"><a href="appendix-c-vjsim-package.html#modeling"><i class="fa fa-check"></i><b>19.2.6</b> <span>Modeling</span></a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="appendix-c-vjsim-package.html"><a href="appendix-c-vjsim-package.html#shiny-app"><i class="fa fa-check"></i><b>19.3</b> <span>Shiny App</span></a></li>
<li class="chapter" data-level="19.4" data-path="appendix-c-vjsim-package.html"><a href="appendix-c-vjsim-package.html#vjsim-example"><i class="fa fa-check"></i><b>19.4</b> <code>vjsim</code> Example</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="appendix-d-recommended-material.html"><a href="appendix-d-recommended-material.html"><i class="fa fa-check"></i><b>20</b> Appendix D: Recommended material</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">bmbstats: bootstrap magnitude-based statistics for sports scientists</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="predictive-tasks-using-bmbstats" class="section level1" number="14">
<h1><span class="header-section-number">Chapter 14</span> Predictive tasks using <code>bmbstats</code></h1>
<p>Simple implementation of the prediction tasks in <code>bmbstats</code> is done with <code>bmbstats::cv_model</code> function, which is short of “cross-validate model”. This function is more of a teaching tool, than something more thorough like the <code>caret</code> <span class="citation">(Kuhn <a href="#ref-R-caret" role="doc-biblioref">2020</a>)</span> or <code>mlr</code> and <code>mlr3</code> packages <span class="citation">(Bischl et al. <a href="#ref-R-mlr" role="doc-biblioref">2016</a>; Lang et al. <a href="#ref-R-mlr3" role="doc-biblioref">2019</a>)</span>. But <code>bmbstats::cv_model</code> is still powerful and versatile for the sports science prediction tasks (e.g. <code>bmbstats::rct_predict</code> is a function that we will introduce later and it was built using <code>bmbstats::cv_model</code> results). <code>bmbstats::cv_model</code> is built using the outstanding <code>hardhat</code> package <span class="citation">(Vaughan and Kuhn <a href="#ref-R-hardhat" role="doc-biblioref">2020</a>)</span>.</p>
<p><code>bmbstats::cv_model</code> has three components: (1) fitting or modeling function (set using the <code>model_func</code> parameter with the <code>bmbstats::lm_model</code>(default) and <code>bmbstats::baseline_model</code> being implemented using <code>stats::lm</code> linear regression function), (2) prediction function; which is used for predicting on the new and training data (set using the <code>predict_func</code> parameter with <code>bmbstats::generic_predict</code> being the default that calls the default predict method, or <code>stats::predict.lm</code> for the <code>lm</code> classes), and (3) performance function; which is used to return performance estimators (set using the <code>perf_func</code> parameter with <code>bmbstats::performance_metrics</code> being the default). This will be much clearer once we start implementing the <code>bmbstats::cv_model</code>.</p>
<p>To demonstrate <code>bmbstats::cv_model</code> function, let’s generate simple data for prediction:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="predictive-tasks-using-bmbstats.html#cb77-1"></a><span class="kw">require</span>(tidyverse)</span>
<span id="cb77-2"><a href="predictive-tasks-using-bmbstats.html#cb77-2"></a><span class="kw">require</span>(bmbstats)</span>
<span id="cb77-3"><a href="predictive-tasks-using-bmbstats.html#cb77-3"></a><span class="kw">require</span>(cowplot)</span>
<span id="cb77-4"><a href="predictive-tasks-using-bmbstats.html#cb77-4"></a></span>
<span id="cb77-5"><a href="predictive-tasks-using-bmbstats.html#cb77-5"></a><span class="kw">set.seed</span>(<span class="dv">1667</span>)</span>
<span id="cb77-6"><a href="predictive-tasks-using-bmbstats.html#cb77-6"></a></span>
<span id="cb77-7"><a href="predictive-tasks-using-bmbstats.html#cb77-7"></a><span class="co"># Model (DGP)</span></span>
<span id="cb77-8"><a href="predictive-tasks-using-bmbstats.html#cb77-8"></a>random_error &lt;-<span class="st"> </span><span class="dv">2</span></span>
<span id="cb77-9"><a href="predictive-tasks-using-bmbstats.html#cb77-9"></a></span>
<span id="cb77-10"><a href="predictive-tasks-using-bmbstats.html#cb77-10"></a>sinus_data &lt;-<span class="st"> </span><span class="kw">tibble</span>(</span>
<span id="cb77-11"><a href="predictive-tasks-using-bmbstats.html#cb77-11"></a>  <span class="dt">x =</span> <span class="kw">seq</span>(<span class="fl">0.8</span>, <span class="fl">2.5</span>, <span class="fl">0.05</span>),</span>
<span id="cb77-12"><a href="predictive-tasks-using-bmbstats.html#cb77-12"></a>  <span class="dt">observed_y =</span> <span class="dv">30</span> <span class="op">+</span><span class="st"> </span><span class="dv">15</span> <span class="op">*</span><span class="st"> </span>(x <span class="op">*</span><span class="st"> </span><span class="kw">sin</span>(x)) <span class="op">+</span><span class="st"> </span><span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="kw">length</span>(x), <span class="dt">mean =</span> <span class="dv">0</span>, <span class="dt">sd =</span> random_error),</span>
<span id="cb77-13"><a href="predictive-tasks-using-bmbstats.html#cb77-13"></a>  <span class="dt">true_y =</span> <span class="dv">30</span> <span class="op">+</span><span class="st"> </span><span class="dv">15</span> <span class="op">*</span><span class="st"> </span>(x <span class="op">*</span><span class="st"> </span><span class="kw">sin</span>(x))</span>
<span id="cb77-14"><a href="predictive-tasks-using-bmbstats.html#cb77-14"></a>)</span>
<span id="cb77-15"><a href="predictive-tasks-using-bmbstats.html#cb77-15"></a></span>
<span id="cb77-16"><a href="predictive-tasks-using-bmbstats.html#cb77-16"></a><span class="kw">head</span>(sinus_data)</span>
<span id="cb77-17"><a href="predictive-tasks-using-bmbstats.html#cb77-17"></a><span class="co">#&gt; # A tibble: 6 x 3</span></span>
<span id="cb77-18"><a href="predictive-tasks-using-bmbstats.html#cb77-18"></a><span class="co">#&gt;       x observed_y true_y</span></span>
<span id="cb77-19"><a href="predictive-tasks-using-bmbstats.html#cb77-19"></a><span class="co">#&gt;   &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb77-20"><a href="predictive-tasks-using-bmbstats.html#cb77-20"></a><span class="co">#&gt; 1  0.8        41.8   38.6</span></span>
<span id="cb77-21"><a href="predictive-tasks-using-bmbstats.html#cb77-21"></a><span class="co">#&gt; 2  0.85       38.5   39.6</span></span>
<span id="cb77-22"><a href="predictive-tasks-using-bmbstats.html#cb77-22"></a><span class="co">#&gt; 3  0.9        42.3   40.6</span></span>
<span id="cb77-23"><a href="predictive-tasks-using-bmbstats.html#cb77-23"></a><span class="co">#&gt; 4  0.95       41.5   41.6</span></span>
<span id="cb77-24"><a href="predictive-tasks-using-bmbstats.html#cb77-24"></a><span class="co">#&gt; 5  1          40.6   42.6</span></span>
<span id="cb77-25"><a href="predictive-tasks-using-bmbstats.html#cb77-25"></a><span class="co">#&gt; 6  1.05       42.7   43.7</span></span></code></pre></div>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="predictive-tasks-using-bmbstats.html#cb78-1"></a><span class="kw">ggplot</span>(sinus_data, <span class="kw">aes</span>(<span class="dt">x =</span> x)) <span class="op">+</span></span>
<span id="cb78-2"><a href="predictive-tasks-using-bmbstats.html#cb78-2"></a><span class="st">  </span><span class="kw">theme_cowplot</span>(<span class="dv">8</span>) <span class="op">+</span></span>
<span id="cb78-3"><a href="predictive-tasks-using-bmbstats.html#cb78-3"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">y =</span> observed_y)) <span class="op">+</span></span>
<span id="cb78-4"><a href="predictive-tasks-using-bmbstats.html#cb78-4"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> true_y))</span></code></pre></div>
<p><img src="14-Prediction-in-bmbstats_files/figure-html/unnamed-chunk-3-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>This data has <em>irreducible error</em> with <code>SD</code> equal to 2 (a.u.). Let’s use simple linear regression to predict observed <span class="math inline">\(y\)</span>, but evaluate model performance using 10 repeats of 5-folds cross-validations:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="predictive-tasks-using-bmbstats.html#cb79-1"></a>model1 &lt;-<span class="st"> </span>bmbstats<span class="op">::</span><span class="kw">cv_model</span>(</span>
<span id="cb79-2"><a href="predictive-tasks-using-bmbstats.html#cb79-2"></a>  observed_y <span class="op">~</span><span class="st"> </span>x,</span>
<span id="cb79-3"><a href="predictive-tasks-using-bmbstats.html#cb79-3"></a>  sinus_data,</span>
<span id="cb79-4"><a href="predictive-tasks-using-bmbstats.html#cb79-4"></a></span>
<span id="cb79-5"><a href="predictive-tasks-using-bmbstats.html#cb79-5"></a>  <span class="co"># These are default options, but I will list them here</span></span>
<span id="cb79-6"><a href="predictive-tasks-using-bmbstats.html#cb79-6"></a>  <span class="dt">model_func =</span> lm_model,</span>
<span id="cb79-7"><a href="predictive-tasks-using-bmbstats.html#cb79-7"></a>  <span class="dt">predict_func =</span> generic_predict,</span>
<span id="cb79-8"><a href="predictive-tasks-using-bmbstats.html#cb79-8"></a>  <span class="dt">perf_func =</span> performance_metrics,</span>
<span id="cb79-9"><a href="predictive-tasks-using-bmbstats.html#cb79-9"></a></span>
<span id="cb79-10"><a href="predictive-tasks-using-bmbstats.html#cb79-10"></a>  <span class="co"># CV parameters</span></span>
<span id="cb79-11"><a href="predictive-tasks-using-bmbstats.html#cb79-11"></a>  <span class="dt">control =</span> <span class="kw">model_control</span>(</span>
<span id="cb79-12"><a href="predictive-tasks-using-bmbstats.html#cb79-12"></a>    <span class="dt">cv_folds =</span> <span class="dv">5</span>,</span>
<span id="cb79-13"><a href="predictive-tasks-using-bmbstats.html#cb79-13"></a>    <span class="dt">cv_repeats =</span> <span class="dv">10</span>,</span>
<span id="cb79-14"><a href="predictive-tasks-using-bmbstats.html#cb79-14"></a>    <span class="dt">seed =</span> <span class="dv">1667</span></span>
<span id="cb79-15"><a href="predictive-tasks-using-bmbstats.html#cb79-15"></a>  )</span>
<span id="cb79-16"><a href="predictive-tasks-using-bmbstats.html#cb79-16"></a>)</span>
<span id="cb79-17"><a href="predictive-tasks-using-bmbstats.html#cb79-17"></a></span>
<span id="cb79-18"><a href="predictive-tasks-using-bmbstats.html#cb79-18"></a>model1</span>
<span id="cb79-19"><a href="predictive-tasks-using-bmbstats.html#cb79-19"></a><span class="co">#&gt; Training data consists of 2 predictors and 35 observations. Cross-Validation of the model was performed using 10 repeats of 5 folds.</span></span>
<span id="cb79-20"><a href="predictive-tasks-using-bmbstats.html#cb79-20"></a><span class="co">#&gt; </span></span>
<span id="cb79-21"><a href="predictive-tasks-using-bmbstats.html#cb79-21"></a><span class="co">#&gt; Model performance:</span></span>
<span id="cb79-22"><a href="predictive-tasks-using-bmbstats.html#cb79-22"></a><span class="co">#&gt; </span></span>
<span id="cb79-23"><a href="predictive-tasks-using-bmbstats.html#cb79-23"></a><span class="co">#&gt;         metric      training training.pooled testing.pooled        mean</span></span>
<span id="cb79-24"><a href="predictive-tasks-using-bmbstats.html#cb79-24"></a><span class="co">#&gt;            MBE -1.786530e-14    3.608730e-15     0.01201151  0.03878805</span></span>
<span id="cb79-25"><a href="predictive-tasks-using-bmbstats.html#cb79-25"></a><span class="co">#&gt;            MAE  3.307366e+00    3.281275e+00     3.42055845  3.40542550</span></span>
<span id="cb79-26"><a href="predictive-tasks-using-bmbstats.html#cb79-26"></a><span class="co">#&gt;           RMSE  3.830961e+00    3.811531e+00     4.00171168  3.91431323</span></span>
<span id="cb79-27"><a href="predictive-tasks-using-bmbstats.html#cb79-27"></a><span class="co">#&gt;           PPER  2.500597e-01    2.532192e-01     0.24118080  0.22872198</span></span>
<span id="cb79-28"><a href="predictive-tasks-using-bmbstats.html#cb79-28"></a><span class="co">#&gt;  SESOI to RMSE  6.520075e-01    6.461322e-01     0.61542490  0.67035639</span></span>
<span id="cb79-29"><a href="predictive-tasks-using-bmbstats.html#cb79-29"></a><span class="co">#&gt;      R-squared  6.125604e-01    6.164804e-01     0.57725715  0.59398198</span></span>
<span id="cb79-30"><a href="predictive-tasks-using-bmbstats.html#cb79-30"></a><span class="co">#&gt;         MinErr -5.833192e+00   -6.481721e+00    -6.66660654 -4.83585586</span></span>
<span id="cb79-31"><a href="predictive-tasks-using-bmbstats.html#cb79-31"></a><span class="co">#&gt;         MaxErr  9.531759e+00    1.069301e+01    10.89240388  5.74134976</span></span>
<span id="cb79-32"><a href="predictive-tasks-using-bmbstats.html#cb79-32"></a><span class="co">#&gt;      MaxAbsErr  9.531759e+00    1.069301e+01    10.89240388  6.54646863</span></span>
<span id="cb79-33"><a href="predictive-tasks-using-bmbstats.html#cb79-33"></a><span class="co">#&gt;          SD         min        max</span></span>
<span id="cb79-34"><a href="predictive-tasks-using-bmbstats.html#cb79-34"></a><span class="co">#&gt;  1.39091047 -3.56918463  2.8362928</span></span>
<span id="cb79-35"><a href="predictive-tasks-using-bmbstats.html#cb79-35"></a><span class="co">#&gt;  0.71086848  1.90802477  4.6087168</span></span>
<span id="cb79-36"><a href="predictive-tasks-using-bmbstats.html#cb79-36"></a><span class="co">#&gt;  0.78174879  2.19948265  5.4637498</span></span>
<span id="cb79-37"><a href="predictive-tasks-using-bmbstats.html#cb79-37"></a><span class="co">#&gt;  0.05453147  0.15058656  0.3811788</span></span>
<span id="cb79-38"><a href="predictive-tasks-using-bmbstats.html#cb79-38"></a><span class="co">#&gt;  0.16588651  0.47111531  1.1614533</span></span>
<span id="cb79-39"><a href="predictive-tasks-using-bmbstats.html#cb79-39"></a><span class="co">#&gt;  0.20141946 -0.07623944  0.8893906</span></span>
<span id="cb79-40"><a href="predictive-tasks-using-bmbstats.html#cb79-40"></a><span class="co">#&gt;  1.34488218 -6.66660654 -1.8826434</span></span>
<span id="cb79-41"><a href="predictive-tasks-using-bmbstats.html#cb79-41"></a><span class="co">#&gt;  2.57512537  1.06931471 10.8924039</span></span>
<span id="cb79-42"><a href="predictive-tasks-using-bmbstats.html#cb79-42"></a><span class="co">#&gt;  1.91850684  3.68446911 10.8924039</span></span></code></pre></div>
<p>SESOI in the above example is calculated using 0.2 x <code>SD</code> of the outcome variable (i.e. <code>observed_y</code>) which represents Cohen’s trivial effect. SESOI constants of estimation function (that uses training data set to estimate SESOI) can be set up using the <code>SESOI_lower</code> and <code>SESOI_upper</code> parameters (to which the default are <code>bmbstats::SESOI_lower_func</code> and <code>bmbstats::SESOI_upper_func</code> respectively).</p>
<p>The above output represents performance summary using the estimators returned by the <code>bmbstats::performance_metrics</code>. <code>bmbstats</code> has numerous <em>cost</em> functions implemented that could be called using the <code>bmbstats::cost_</code> prefix.</p>
<p>The above output can be plotted using the <code>plot</code> command and <code>type = "estimators"</code> parameter:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="predictive-tasks-using-bmbstats.html#cb80-1"></a><span class="kw">plot</span>(model1, <span class="st">&quot;estimators&quot;</span>)</span></code></pre></div>
<p><img src="14-Prediction-in-bmbstats_files/figure-html/unnamed-chunk-5-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>Error bars represent range of estimator values across cross-validation folds, while the dashed line indicate training performance. There estimates can be accessed in the returned object, i.e. <code>model1$performance</code> for training, and <code>model1$cross_validation$performance</code> for cross-validation.</p>
<div id="how-to-implement-different-performance-metrics" class="section level2" number="14.1">
<h2><span class="header-section-number">14.1</span> How to implement different performance metrics?</h2>
<p>To implement different performance metrics you need to write your own function that return named vector using the following template:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="predictive-tasks-using-bmbstats.html#cb81-1"></a><span class="co"># My performance metrics</span></span>
<span id="cb81-2"><a href="predictive-tasks-using-bmbstats.html#cb81-2"></a>my_perf_metrics &lt;-<span class="st"> </span><span class="cf">function</span>(observed,</span>
<span id="cb81-3"><a href="predictive-tasks-using-bmbstats.html#cb81-3"></a>                            predicted,</span>
<span id="cb81-4"><a href="predictive-tasks-using-bmbstats.html#cb81-4"></a>                            <span class="dt">SESOI_lower =</span> <span class="dv">0</span>,</span>
<span id="cb81-5"><a href="predictive-tasks-using-bmbstats.html#cb81-5"></a>                            <span class="dt">SESOI_upper =</span> <span class="dv">0</span>,</span>
<span id="cb81-6"><a href="predictive-tasks-using-bmbstats.html#cb81-6"></a>                            <span class="dt">na.rm =</span> <span class="ot">FALSE</span>) {</span>
<span id="cb81-7"><a href="predictive-tasks-using-bmbstats.html#cb81-7"></a>  <span class="kw">c</span>(</span>
<span id="cb81-8"><a href="predictive-tasks-using-bmbstats.html#cb81-8"></a>    <span class="dt">RMSE =</span> <span class="kw">cost_RMSE</span>(</span>
<span id="cb81-9"><a href="predictive-tasks-using-bmbstats.html#cb81-9"></a>      <span class="dt">observed =</span> observed,</span>
<span id="cb81-10"><a href="predictive-tasks-using-bmbstats.html#cb81-10"></a>      <span class="dt">predicted =</span> predicted,</span>
<span id="cb81-11"><a href="predictive-tasks-using-bmbstats.html#cb81-11"></a>      <span class="dt">SESOI_lower =</span> SESOI_lower,</span>
<span id="cb81-12"><a href="predictive-tasks-using-bmbstats.html#cb81-12"></a>      <span class="dt">SESOI_upper =</span> SESOI_upper,</span>
<span id="cb81-13"><a href="predictive-tasks-using-bmbstats.html#cb81-13"></a>      <span class="dt">na.rm =</span> na.rm</span>
<span id="cb81-14"><a href="predictive-tasks-using-bmbstats.html#cb81-14"></a>    ),</span>
<span id="cb81-15"><a href="predictive-tasks-using-bmbstats.html#cb81-15"></a></span>
<span id="cb81-16"><a href="predictive-tasks-using-bmbstats.html#cb81-16"></a>    <span class="dt">PPER =</span> <span class="kw">cost_PPER</span>(</span>
<span id="cb81-17"><a href="predictive-tasks-using-bmbstats.html#cb81-17"></a>      <span class="dt">observed =</span> observed,</span>
<span id="cb81-18"><a href="predictive-tasks-using-bmbstats.html#cb81-18"></a>      <span class="dt">predicted =</span> predicted,</span>
<span id="cb81-19"><a href="predictive-tasks-using-bmbstats.html#cb81-19"></a>      <span class="dt">SESOI_lower =</span> SESOI_lower,</span>
<span id="cb81-20"><a href="predictive-tasks-using-bmbstats.html#cb81-20"></a>      <span class="dt">SESOI_upper =</span> SESOI_upper,</span>
<span id="cb81-21"><a href="predictive-tasks-using-bmbstats.html#cb81-21"></a>      <span class="dt">na.rm =</span> na.rm</span>
<span id="cb81-22"><a href="predictive-tasks-using-bmbstats.html#cb81-22"></a>    ),</span>
<span id="cb81-23"><a href="predictive-tasks-using-bmbstats.html#cb81-23"></a></span>
<span id="cb81-24"><a href="predictive-tasks-using-bmbstats.html#cb81-24"></a>    <span class="st">`</span><span class="dt">R-squared</span><span class="st">`</span> =<span class="st"> </span><span class="kw">cost_R_squared</span>(</span>
<span id="cb81-25"><a href="predictive-tasks-using-bmbstats.html#cb81-25"></a>      <span class="dt">observed =</span> observed,</span>
<span id="cb81-26"><a href="predictive-tasks-using-bmbstats.html#cb81-26"></a>      <span class="dt">predicted =</span> predicted,</span>
<span id="cb81-27"><a href="predictive-tasks-using-bmbstats.html#cb81-27"></a>      <span class="dt">SESOI_lower =</span> SESOI_lower,</span>
<span id="cb81-28"><a href="predictive-tasks-using-bmbstats.html#cb81-28"></a>      <span class="dt">SESOI_upper =</span> SESOI_upper,</span>
<span id="cb81-29"><a href="predictive-tasks-using-bmbstats.html#cb81-29"></a>      <span class="dt">na.rm =</span> na.rm</span>
<span id="cb81-30"><a href="predictive-tasks-using-bmbstats.html#cb81-30"></a>    )</span>
<span id="cb81-31"><a href="predictive-tasks-using-bmbstats.html#cb81-31"></a>  )</span>
<span id="cb81-32"><a href="predictive-tasks-using-bmbstats.html#cb81-32"></a>}</span>
<span id="cb81-33"><a href="predictive-tasks-using-bmbstats.html#cb81-33"></a></span>
<span id="cb81-34"><a href="predictive-tasks-using-bmbstats.html#cb81-34"></a></span>
<span id="cb81-35"><a href="predictive-tasks-using-bmbstats.html#cb81-35"></a><span class="co"># Re-run the cv_model with my perf metrics</span></span>
<span id="cb81-36"><a href="predictive-tasks-using-bmbstats.html#cb81-36"></a>model2 &lt;-<span class="st"> </span>bmbstats<span class="op">::</span><span class="kw">cv_model</span>(</span>
<span id="cb81-37"><a href="predictive-tasks-using-bmbstats.html#cb81-37"></a>  observed_y <span class="op">~</span><span class="st"> </span>x,</span>
<span id="cb81-38"><a href="predictive-tasks-using-bmbstats.html#cb81-38"></a>  sinus_data,</span>
<span id="cb81-39"><a href="predictive-tasks-using-bmbstats.html#cb81-39"></a></span>
<span id="cb81-40"><a href="predictive-tasks-using-bmbstats.html#cb81-40"></a>  <span class="co"># Use our performance metrics</span></span>
<span id="cb81-41"><a href="predictive-tasks-using-bmbstats.html#cb81-41"></a>  <span class="dt">perf_func =</span> my_perf_metrics,</span>
<span id="cb81-42"><a href="predictive-tasks-using-bmbstats.html#cb81-42"></a></span>
<span id="cb81-43"><a href="predictive-tasks-using-bmbstats.html#cb81-43"></a>  <span class="co"># CV parameters</span></span>
<span id="cb81-44"><a href="predictive-tasks-using-bmbstats.html#cb81-44"></a>  <span class="dt">control =</span> <span class="kw">model_control</span>(</span>
<span id="cb81-45"><a href="predictive-tasks-using-bmbstats.html#cb81-45"></a>    <span class="dt">cv_folds =</span> <span class="dv">5</span>,</span>
<span id="cb81-46"><a href="predictive-tasks-using-bmbstats.html#cb81-46"></a>    <span class="dt">cv_repeats =</span> <span class="dv">10</span>,</span>
<span id="cb81-47"><a href="predictive-tasks-using-bmbstats.html#cb81-47"></a>    <span class="dt">seed =</span> <span class="dv">1667</span></span>
<span id="cb81-48"><a href="predictive-tasks-using-bmbstats.html#cb81-48"></a>  )</span>
<span id="cb81-49"><a href="predictive-tasks-using-bmbstats.html#cb81-49"></a>)</span>
<span id="cb81-50"><a href="predictive-tasks-using-bmbstats.html#cb81-50"></a></span>
<span id="cb81-51"><a href="predictive-tasks-using-bmbstats.html#cb81-51"></a>model2</span>
<span id="cb81-52"><a href="predictive-tasks-using-bmbstats.html#cb81-52"></a><span class="co">#&gt; Training data consists of 2 predictors and 35 observations. Cross-Validation of the model was performed using 10 repeats of 5 folds.</span></span>
<span id="cb81-53"><a href="predictive-tasks-using-bmbstats.html#cb81-53"></a><span class="co">#&gt; </span></span>
<span id="cb81-54"><a href="predictive-tasks-using-bmbstats.html#cb81-54"></a><span class="co">#&gt; Model performance:</span></span>
<span id="cb81-55"><a href="predictive-tasks-using-bmbstats.html#cb81-55"></a><span class="co">#&gt; </span></span>
<span id="cb81-56"><a href="predictive-tasks-using-bmbstats.html#cb81-56"></a><span class="co">#&gt;     metric  training training.pooled testing.pooled     mean         SD</span></span>
<span id="cb81-57"><a href="predictive-tasks-using-bmbstats.html#cb81-57"></a><span class="co">#&gt;       RMSE 3.8309607       3.8115312      4.0017117 3.914313 0.78174879</span></span>
<span id="cb81-58"><a href="predictive-tasks-using-bmbstats.html#cb81-58"></a><span class="co">#&gt;       PPER 0.2500597       0.2532192      0.2411808 0.228722 0.05453147</span></span>
<span id="cb81-59"><a href="predictive-tasks-using-bmbstats.html#cb81-59"></a><span class="co">#&gt;  R-squared 0.6125604       0.6164804      0.5772572 0.593982 0.20141946</span></span>
<span id="cb81-60"><a href="predictive-tasks-using-bmbstats.html#cb81-60"></a><span class="co">#&gt;          min       max</span></span>
<span id="cb81-61"><a href="predictive-tasks-using-bmbstats.html#cb81-61"></a><span class="co">#&gt;   2.19948265 5.4637498</span></span>
<span id="cb81-62"><a href="predictive-tasks-using-bmbstats.html#cb81-62"></a><span class="co">#&gt;   0.15058656 0.3811788</span></span>
<span id="cb81-63"><a href="predictive-tasks-using-bmbstats.html#cb81-63"></a><span class="co">#&gt;  -0.07623944 0.8893906</span></span></code></pre></div>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="predictive-tasks-using-bmbstats.html#cb82-1"></a><span class="kw">plot</span>(model2, <span class="st">&quot;estimators&quot;</span>)</span></code></pre></div>
<p><img src="14-Prediction-in-bmbstats_files/figure-html/unnamed-chunk-7-1.png" width="90%" style="display: block; margin: auto;" /></p>
</div>
<div id="how-to-use-different-prediction-model" class="section level2" number="14.2">
<h2><span class="header-section-number">14.2</span> How to use different prediction model?</h2>
<p>To use different prediction model instead of <code>stats::lm</code>, you will need to modify the model function using the following template. Let’s use Regression Tree using the <code>rpart</code> package <span class="citation">(Therneau and Atkinson <a href="#ref-R-rpart" role="doc-biblioref">2019</a>)</span>:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="predictive-tasks-using-bmbstats.html#cb83-1"></a><span class="kw">require</span>(rpart)</span>
<span id="cb83-2"><a href="predictive-tasks-using-bmbstats.html#cb83-2"></a></span>
<span id="cb83-3"><a href="predictive-tasks-using-bmbstats.html#cb83-3"></a><span class="co"># My prediction model</span></span>
<span id="cb83-4"><a href="predictive-tasks-using-bmbstats.html#cb83-4"></a>my_model_func &lt;-<span class="st"> </span><span class="cf">function</span>(predictors,</span>
<span id="cb83-5"><a href="predictive-tasks-using-bmbstats.html#cb83-5"></a>                          outcome,</span>
<span id="cb83-6"><a href="predictive-tasks-using-bmbstats.html#cb83-6"></a>                          <span class="dt">SESOI_lower =</span> <span class="dv">0</span>,</span>
<span id="cb83-7"><a href="predictive-tasks-using-bmbstats.html#cb83-7"></a>                          <span class="dt">SESOI_upper =</span> <span class="dv">0</span>,</span>
<span id="cb83-8"><a href="predictive-tasks-using-bmbstats.html#cb83-8"></a>                          <span class="dt">na.rm =</span> <span class="ot">FALSE</span>,</span>
<span id="cb83-9"><a href="predictive-tasks-using-bmbstats.html#cb83-9"></a>                          ...) {</span>
<span id="cb83-10"><a href="predictive-tasks-using-bmbstats.html#cb83-10"></a>  data &lt;-<span class="st"> </span><span class="kw">cbind</span>(<span class="dt">.outcome =</span> outcome, predictors)</span>
<span id="cb83-11"><a href="predictive-tasks-using-bmbstats.html#cb83-11"></a>  <span class="kw">rpart</span>(.outcome <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> data, ...)</span>
<span id="cb83-12"><a href="predictive-tasks-using-bmbstats.html#cb83-12"></a>}</span>
<span id="cb83-13"><a href="predictive-tasks-using-bmbstats.html#cb83-13"></a></span>
<span id="cb83-14"><a href="predictive-tasks-using-bmbstats.html#cb83-14"></a><span class="co"># Call the cv_model</span></span>
<span id="cb83-15"><a href="predictive-tasks-using-bmbstats.html#cb83-15"></a>model3 &lt;-<span class="st"> </span>bmbstats<span class="op">::</span><span class="kw">cv_model</span>(</span>
<span id="cb83-16"><a href="predictive-tasks-using-bmbstats.html#cb83-16"></a>  observed_y <span class="op">~</span><span class="st"> </span>x,</span>
<span id="cb83-17"><a href="predictive-tasks-using-bmbstats.html#cb83-17"></a>  sinus_data,</span>
<span id="cb83-18"><a href="predictive-tasks-using-bmbstats.html#cb83-18"></a></span>
<span id="cb83-19"><a href="predictive-tasks-using-bmbstats.html#cb83-19"></a>  <span class="co"># Use our model function</span></span>
<span id="cb83-20"><a href="predictive-tasks-using-bmbstats.html#cb83-20"></a>  <span class="dt">model_func =</span> my_model_func,</span>
<span id="cb83-21"><a href="predictive-tasks-using-bmbstats.html#cb83-21"></a></span>
<span id="cb83-22"><a href="predictive-tasks-using-bmbstats.html#cb83-22"></a>  <span class="co"># CV parameters</span></span>
<span id="cb83-23"><a href="predictive-tasks-using-bmbstats.html#cb83-23"></a>  <span class="dt">control =</span> <span class="kw">model_control</span>(</span>
<span id="cb83-24"><a href="predictive-tasks-using-bmbstats.html#cb83-24"></a>    <span class="dt">cv_folds =</span> <span class="dv">5</span>,</span>
<span id="cb83-25"><a href="predictive-tasks-using-bmbstats.html#cb83-25"></a>    <span class="dt">cv_repeats =</span> <span class="dv">10</span>,</span>
<span id="cb83-26"><a href="predictive-tasks-using-bmbstats.html#cb83-26"></a>    <span class="dt">seed =</span> <span class="dv">1667</span></span>
<span id="cb83-27"><a href="predictive-tasks-using-bmbstats.html#cb83-27"></a>  ),</span>
<span id="cb83-28"><a href="predictive-tasks-using-bmbstats.html#cb83-28"></a></span>
<span id="cb83-29"><a href="predictive-tasks-using-bmbstats.html#cb83-29"></a>  <span class="co"># Do not create intercept column</span></span>
<span id="cb83-30"><a href="predictive-tasks-using-bmbstats.html#cb83-30"></a>  <span class="dt">intercept =</span> <span class="ot">TRUE</span></span>
<span id="cb83-31"><a href="predictive-tasks-using-bmbstats.html#cb83-31"></a>)</span>
<span id="cb83-32"><a href="predictive-tasks-using-bmbstats.html#cb83-32"></a></span>
<span id="cb83-33"><a href="predictive-tasks-using-bmbstats.html#cb83-33"></a>model3</span>
<span id="cb83-34"><a href="predictive-tasks-using-bmbstats.html#cb83-34"></a><span class="co">#&gt; Training data consists of 2 predictors and 35 observations. Cross-Validation of the model was performed using 10 repeats of 5 folds.</span></span>
<span id="cb83-35"><a href="predictive-tasks-using-bmbstats.html#cb83-35"></a><span class="co">#&gt; </span></span>
<span id="cb83-36"><a href="predictive-tasks-using-bmbstats.html#cb83-36"></a><span class="co">#&gt; Model performance:</span></span>
<span id="cb83-37"><a href="predictive-tasks-using-bmbstats.html#cb83-37"></a><span class="co">#&gt; </span></span>
<span id="cb83-38"><a href="predictive-tasks-using-bmbstats.html#cb83-38"></a><span class="co">#&gt;         metric      training training.pooled testing.pooled        mean</span></span>
<span id="cb83-39"><a href="predictive-tasks-using-bmbstats.html#cb83-39"></a><span class="co">#&gt;            MBE  2.030618e-16   -3.045865e-16     0.03760974  0.03641386</span></span>
<span id="cb83-40"><a href="predictive-tasks-using-bmbstats.html#cb83-40"></a><span class="co">#&gt;            MAE  2.023389e+00    2.268546e+00     2.60389737  2.57549008</span></span>
<span id="cb83-41"><a href="predictive-tasks-using-bmbstats.html#cb83-41"></a><span class="co">#&gt;           RMSE  2.591359e+00    2.765355e+00     3.29362285  3.19456487</span></span>
<span id="cb83-42"><a href="predictive-tasks-using-bmbstats.html#cb83-42"></a><span class="co">#&gt;           PPER  3.621870e-01    3.437038e-01     0.29087228  0.27713101</span></span>
<span id="cb83-43"><a href="predictive-tasks-using-bmbstats.html#cb83-43"></a><span class="co">#&gt;  SESOI to RMSE  9.639014e-01    8.905739e-01     0.74773376  0.83310652</span></span>
<span id="cb83-44"><a href="predictive-tasks-using-bmbstats.html#cb83-44"></a><span class="co">#&gt;      R-squared  8.227265e-01    7.981214e-01     0.71366153  0.74453263</span></span>
<span id="cb83-45"><a href="predictive-tasks-using-bmbstats.html#cb83-45"></a><span class="co">#&gt;         MinErr -5.699018e+00   -6.168662e+00    -9.88715278 -4.49333669</span></span>
<span id="cb83-46"><a href="predictive-tasks-using-bmbstats.html#cb83-46"></a><span class="co">#&gt;         MaxErr  6.097584e+00    6.427283e+00     7.22167137  4.47699323</span></span>
<span id="cb83-47"><a href="predictive-tasks-using-bmbstats.html#cb83-47"></a><span class="co">#&gt;      MaxAbsErr  6.097584e+00    6.427283e+00     9.88715278  5.86162382</span></span>
<span id="cb83-48"><a href="predictive-tasks-using-bmbstats.html#cb83-48"></a><span class="co">#&gt;          SD        min        max</span></span>
<span id="cb83-49"><a href="predictive-tasks-using-bmbstats.html#cb83-49"></a><span class="co">#&gt;  1.38472089 -3.5600378  2.4319242</span></span>
<span id="cb83-50"><a href="predictive-tasks-using-bmbstats.html#cb83-50"></a><span class="co">#&gt;  0.60425150  0.9905252  3.7964691</span></span>
<span id="cb83-51"><a href="predictive-tasks-using-bmbstats.html#cb83-51"></a><span class="co">#&gt;  0.67699316  1.1382304  4.6196434</span></span>
<span id="cb83-52"><a href="predictive-tasks-using-bmbstats.html#cb83-52"></a><span class="co">#&gt;  0.07822901  0.1429604  0.6357025</span></span>
<span id="cb83-53"><a href="predictive-tasks-using-bmbstats.html#cb83-53"></a><span class="co">#&gt;  0.26906599  0.5367524  2.2239463</span></span>
<span id="cb83-54"><a href="predictive-tasks-using-bmbstats.html#cb83-54"></a><span class="co">#&gt;  0.13595473  0.3724261  0.9682861</span></span>
<span id="cb83-55"><a href="predictive-tasks-using-bmbstats.html#cb83-55"></a><span class="co">#&gt;  2.25968230 -9.8871528 -0.4531138</span></span>
<span id="cb83-56"><a href="predictive-tasks-using-bmbstats.html#cb83-56"></a><span class="co">#&gt;  1.95348134 -0.3225821  7.2216714</span></span>
<span id="cb83-57"><a href="predictive-tasks-using-bmbstats.html#cb83-57"></a><span class="co">#&gt;  1.31129516  1.8902345  9.8871528</span></span></code></pre></div>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="predictive-tasks-using-bmbstats.html#cb84-1"></a><span class="kw">plot</span>(model3, <span class="st">&quot;estimators&quot;</span>)</span></code></pre></div>
<p><img src="14-Prediction-in-bmbstats_files/figure-html/unnamed-chunk-9-1.png" width="90%" style="display: block; margin: auto;" /></p>
</div>
<div id="example-of-using-tuning-parameter" class="section level2" number="14.3">
<h2><span class="header-section-number">14.3</span> Example of using tuning parameter</h2>
<p>Let’s use the same example from the <a href="prediction.html#overfitting">Overfitting</a> section of the <a href="prediction.html#prediction">Prediction</a> chapter - polynomial fit. The objective is to select the polynomial degree that gives the best cross-validation performance.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="predictive-tasks-using-bmbstats.html#cb85-1"></a>poly_tuning &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">12</span>)</span>
<span id="cb85-2"><a href="predictive-tasks-using-bmbstats.html#cb85-2"></a></span>
<span id="cb85-3"><a href="predictive-tasks-using-bmbstats.html#cb85-3"></a>my_model_func &lt;-<span class="st"> </span><span class="cf">function</span>(predictors,</span>
<span id="cb85-4"><a href="predictive-tasks-using-bmbstats.html#cb85-4"></a>                          outcome,</span>
<span id="cb85-5"><a href="predictive-tasks-using-bmbstats.html#cb85-5"></a>                          <span class="dt">SESOI_lower =</span> <span class="dv">0</span>,</span>
<span id="cb85-6"><a href="predictive-tasks-using-bmbstats.html#cb85-6"></a>                          <span class="dt">SESOI_upper =</span> <span class="dv">0</span>,</span>
<span id="cb85-7"><a href="predictive-tasks-using-bmbstats.html#cb85-7"></a>                          <span class="dt">na.rm =</span> <span class="ot">FALSE</span>,</span>
<span id="cb85-8"><a href="predictive-tasks-using-bmbstats.html#cb85-8"></a>                          <span class="dt">poly_n =</span> <span class="dv">1</span>) {</span>
<span id="cb85-9"><a href="predictive-tasks-using-bmbstats.html#cb85-9"></a>  data &lt;-<span class="st"> </span><span class="kw">cbind</span>(<span class="dt">.outcome =</span> outcome, predictors)</span>
<span id="cb85-10"><a href="predictive-tasks-using-bmbstats.html#cb85-10"></a>  <span class="kw">lm</span>(.outcome <span class="op">~</span><span class="st"> </span><span class="kw">poly</span>(x, poly_n), <span class="dt">data =</span> data)</span>
<span id="cb85-11"><a href="predictive-tasks-using-bmbstats.html#cb85-11"></a>}</span>
<span id="cb85-12"><a href="predictive-tasks-using-bmbstats.html#cb85-12"></a></span>
<span id="cb85-13"><a href="predictive-tasks-using-bmbstats.html#cb85-13"></a></span>
<span id="cb85-14"><a href="predictive-tasks-using-bmbstats.html#cb85-14"></a><span class="co"># Model performance across different tuning parameters</span></span>
<span id="cb85-15"><a href="predictive-tasks-using-bmbstats.html#cb85-15"></a>poly_perf &lt;-<span class="st"> </span><span class="kw">map_df</span>(poly_tuning, <span class="cf">function</span>(poly_n) {</span>
<span id="cb85-16"><a href="predictive-tasks-using-bmbstats.html#cb85-16"></a>  model &lt;-<span class="st"> </span>bmbstats<span class="op">::</span><span class="kw">cv_model</span>(</span>
<span id="cb85-17"><a href="predictive-tasks-using-bmbstats.html#cb85-17"></a>    observed_y <span class="op">~</span><span class="st"> </span>x,</span>
<span id="cb85-18"><a href="predictive-tasks-using-bmbstats.html#cb85-18"></a>    sinus_data,</span>
<span id="cb85-19"><a href="predictive-tasks-using-bmbstats.html#cb85-19"></a>    <span class="co"># CV parameters</span></span>
<span id="cb85-20"><a href="predictive-tasks-using-bmbstats.html#cb85-20"></a>    <span class="dt">control =</span> <span class="kw">model_control</span>(</span>
<span id="cb85-21"><a href="predictive-tasks-using-bmbstats.html#cb85-21"></a>      <span class="dt">cv_folds =</span> <span class="dv">5</span>,</span>
<span id="cb85-22"><a href="predictive-tasks-using-bmbstats.html#cb85-22"></a>      <span class="dt">cv_repeats =</span> <span class="dv">10</span>,</span>
<span id="cb85-23"><a href="predictive-tasks-using-bmbstats.html#cb85-23"></a>      <span class="dt">seed =</span> <span class="dv">1667</span></span>
<span id="cb85-24"><a href="predictive-tasks-using-bmbstats.html#cb85-24"></a>    ),</span>
<span id="cb85-25"><a href="predictive-tasks-using-bmbstats.html#cb85-25"></a>    <span class="dt">model_func =</span> my_model_func,</span>
<span id="cb85-26"><a href="predictive-tasks-using-bmbstats.html#cb85-26"></a>    <span class="dt">poly_n =</span> poly_n</span>
<span id="cb85-27"><a href="predictive-tasks-using-bmbstats.html#cb85-27"></a>  )</span>
<span id="cb85-28"><a href="predictive-tasks-using-bmbstats.html#cb85-28"></a></span>
<span id="cb85-29"><a href="predictive-tasks-using-bmbstats.html#cb85-29"></a>  <span class="kw">data.frame</span>(</span>
<span id="cb85-30"><a href="predictive-tasks-using-bmbstats.html#cb85-30"></a>    <span class="dt">poly_n =</span> poly_n,</span>
<span id="cb85-31"><a href="predictive-tasks-using-bmbstats.html#cb85-31"></a>    model<span class="op">$</span>cross_validation<span class="op">$</span>performance<span class="op">$</span>summary<span class="op">$</span>overall</span>
<span id="cb85-32"><a href="predictive-tasks-using-bmbstats.html#cb85-32"></a>  )</span>
<span id="cb85-33"><a href="predictive-tasks-using-bmbstats.html#cb85-33"></a>})</span>
<span id="cb85-34"><a href="predictive-tasks-using-bmbstats.html#cb85-34"></a></span>
<span id="cb85-35"><a href="predictive-tasks-using-bmbstats.html#cb85-35"></a><span class="kw">head</span>(poly_perf)</span>
<span id="cb85-36"><a href="predictive-tasks-using-bmbstats.html#cb85-36"></a><span class="co">#&gt;   poly_n        metric      training training.pooled testing.pooled       mean</span></span>
<span id="cb85-37"><a href="predictive-tasks-using-bmbstats.html#cb85-37"></a><span class="co">#&gt; 1      1           MBE -1.339861e-14    1.081218e-15     0.01201151 0.03878805</span></span>
<span id="cb85-38"><a href="predictive-tasks-using-bmbstats.html#cb85-38"></a><span class="co">#&gt; 2      1           MAE  3.307366e+00    3.281275e+00     3.42055845 3.40542550</span></span>
<span id="cb85-39"><a href="predictive-tasks-using-bmbstats.html#cb85-39"></a><span class="co">#&gt; 3      1          RMSE  3.830961e+00    3.811531e+00     4.00171168 3.91431323</span></span>
<span id="cb85-40"><a href="predictive-tasks-using-bmbstats.html#cb85-40"></a><span class="co">#&gt; 4      1          PPER  2.500597e-01    2.532192e-01     0.24118080 0.22872198</span></span>
<span id="cb85-41"><a href="predictive-tasks-using-bmbstats.html#cb85-41"></a><span class="co">#&gt; 5      1 SESOI to RMSE  6.520075e-01    6.461322e-01     0.61542490 0.67035639</span></span>
<span id="cb85-42"><a href="predictive-tasks-using-bmbstats.html#cb85-42"></a><span class="co">#&gt; 6      1     R-squared  6.125604e-01    6.164804e-01     0.57725715 0.59398198</span></span>
<span id="cb85-43"><a href="predictive-tasks-using-bmbstats.html#cb85-43"></a><span class="co">#&gt;           SD         min       max</span></span>
<span id="cb85-44"><a href="predictive-tasks-using-bmbstats.html#cb85-44"></a><span class="co">#&gt; 1 1.39091047 -3.56918463 2.8362928</span></span>
<span id="cb85-45"><a href="predictive-tasks-using-bmbstats.html#cb85-45"></a><span class="co">#&gt; 2 0.71086848  1.90802477 4.6087168</span></span>
<span id="cb85-46"><a href="predictive-tasks-using-bmbstats.html#cb85-46"></a><span class="co">#&gt; 3 0.78174879  2.19948265 5.4637498</span></span>
<span id="cb85-47"><a href="predictive-tasks-using-bmbstats.html#cb85-47"></a><span class="co">#&gt; 4 0.05453147  0.15058656 0.3811788</span></span>
<span id="cb85-48"><a href="predictive-tasks-using-bmbstats.html#cb85-48"></a><span class="co">#&gt; 5 0.16588651  0.47111531 1.1614533</span></span>
<span id="cb85-49"><a href="predictive-tasks-using-bmbstats.html#cb85-49"></a><span class="co">#&gt; 6 0.20141946 -0.07623944 0.8893906</span></span></code></pre></div>
<p>In the figure below the results of this analysis is depicted. Dashed red line represents cross-validated performance (using performance on the pooled testing data).</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="predictive-tasks-using-bmbstats.html#cb86-1"></a><span class="kw">ggplot</span>(poly_perf, <span class="kw">aes</span>(<span class="dt">x =</span> poly_n)) <span class="op">+</span></span>
<span id="cb86-2"><a href="predictive-tasks-using-bmbstats.html#cb86-2"></a><span class="st">  </span><span class="kw">theme_cowplot</span>(<span class="dv">8</span>) <span class="op">+</span></span>
<span id="cb86-3"><a href="predictive-tasks-using-bmbstats.html#cb86-3"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> training), <span class="dt">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="dt">alpha =</span> <span class="fl">0.8</span>) <span class="op">+</span></span>
<span id="cb86-4"><a href="predictive-tasks-using-bmbstats.html#cb86-4"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> testing.pooled), <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="dt">alpha =</span> <span class="fl">0.8</span>) <span class="op">+</span></span>
<span id="cb86-5"><a href="predictive-tasks-using-bmbstats.html#cb86-5"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>metric, <span class="dt">scales =</span> <span class="st">&quot;free_y&quot;</span>)</span></code></pre></div>
<p><img src="14-Prediction-in-bmbstats_files/figure-html/unnamed-chunk-11-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>As can be seen, the best predictive performance is with 3rd polynomial degrees. The figure below depicts <code>RMSE</code> estimator for higher resolution image.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="predictive-tasks-using-bmbstats.html#cb87-1"></a><span class="kw">ggplot</span>(</span>
<span id="cb87-2"><a href="predictive-tasks-using-bmbstats.html#cb87-2"></a>  <span class="kw">filter</span>(</span>
<span id="cb87-3"><a href="predictive-tasks-using-bmbstats.html#cb87-3"></a>    poly_perf,</span>
<span id="cb87-4"><a href="predictive-tasks-using-bmbstats.html#cb87-4"></a>    metric <span class="op">==</span><span class="st"> &quot;RMSE&quot;</span></span>
<span id="cb87-5"><a href="predictive-tasks-using-bmbstats.html#cb87-5"></a>  ),</span>
<span id="cb87-6"><a href="predictive-tasks-using-bmbstats.html#cb87-6"></a>  <span class="kw">aes</span>(<span class="dt">x =</span> poly_n)</span>
<span id="cb87-7"><a href="predictive-tasks-using-bmbstats.html#cb87-7"></a>) <span class="op">+</span></span>
<span id="cb87-8"><a href="predictive-tasks-using-bmbstats.html#cb87-8"></a><span class="st">  </span><span class="kw">theme_cowplot</span>(<span class="dv">8</span>) <span class="op">+</span></span>
<span id="cb87-9"><a href="predictive-tasks-using-bmbstats.html#cb87-9"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> training), <span class="dt">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="dt">alpha =</span> <span class="fl">0.8</span>) <span class="op">+</span></span>
<span id="cb87-10"><a href="predictive-tasks-using-bmbstats.html#cb87-10"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> testing.pooled), <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="dt">alpha =</span> <span class="fl">0.8</span>) <span class="op">+</span></span>
<span id="cb87-11"><a href="predictive-tasks-using-bmbstats.html#cb87-11"></a><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;RMSE&quot;</span>)</span></code></pre></div>
<p><img src="14-Prediction-in-bmbstats_files/figure-html/unnamed-chunk-12-1.png" width="90%" style="display: block; margin: auto;" /></p>
</div>
<div id="plotting" class="section level2" number="14.4">
<h2><span class="header-section-number">14.4</span> Plotting</h2>
<p>Various diagnostic graphs can be easily generated using a generic <code>plot</code> function. Let’s fit a 3rd degree polynomial model first:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="predictive-tasks-using-bmbstats.html#cb88-1"></a>model4 &lt;-<span class="st"> </span>bmbstats<span class="op">::</span><span class="kw">cv_model</span>(</span>
<span id="cb88-2"><a href="predictive-tasks-using-bmbstats.html#cb88-2"></a>  observed_y <span class="op">~</span><span class="st"> </span><span class="kw">poly</span>(x, <span class="dv">3</span>),</span>
<span id="cb88-3"><a href="predictive-tasks-using-bmbstats.html#cb88-3"></a>  sinus_data,</span>
<span id="cb88-4"><a href="predictive-tasks-using-bmbstats.html#cb88-4"></a></span>
<span id="cb88-5"><a href="predictive-tasks-using-bmbstats.html#cb88-5"></a>  <span class="co"># CV parameters</span></span>
<span id="cb88-6"><a href="predictive-tasks-using-bmbstats.html#cb88-6"></a>  <span class="dt">control =</span> <span class="kw">model_control</span>(</span>
<span id="cb88-7"><a href="predictive-tasks-using-bmbstats.html#cb88-7"></a>    <span class="dt">cv_folds =</span> <span class="dv">5</span>,</span>
<span id="cb88-8"><a href="predictive-tasks-using-bmbstats.html#cb88-8"></a>    <span class="dt">cv_repeats =</span> <span class="dv">10</span>,</span>
<span id="cb88-9"><a href="predictive-tasks-using-bmbstats.html#cb88-9"></a>    <span class="dt">seed =</span> <span class="dv">1667</span></span>
<span id="cb88-10"><a href="predictive-tasks-using-bmbstats.html#cb88-10"></a>  )</span>
<span id="cb88-11"><a href="predictive-tasks-using-bmbstats.html#cb88-11"></a>)</span>
<span id="cb88-12"><a href="predictive-tasks-using-bmbstats.html#cb88-12"></a></span>
<span id="cb88-13"><a href="predictive-tasks-using-bmbstats.html#cb88-13"></a>model4</span>
<span id="cb88-14"><a href="predictive-tasks-using-bmbstats.html#cb88-14"></a><span class="co">#&gt; Training data consists of 4 predictors and 35 observations. Cross-Validation of the model was performed using 10 repeats of 5 folds.</span></span>
<span id="cb88-15"><a href="predictive-tasks-using-bmbstats.html#cb88-15"></a><span class="co">#&gt; </span></span>
<span id="cb88-16"><a href="predictive-tasks-using-bmbstats.html#cb88-16"></a><span class="co">#&gt; Model performance:</span></span>
<span id="cb88-17"><a href="predictive-tasks-using-bmbstats.html#cb88-17"></a><span class="co">#&gt; </span></span>
<span id="cb88-18"><a href="predictive-tasks-using-bmbstats.html#cb88-18"></a><span class="co">#&gt;         metric      training training.pooled testing.pooled        mean</span></span>
<span id="cb88-19"><a href="predictive-tasks-using-bmbstats.html#cb88-19"></a><span class="co">#&gt;            MBE -1.299275e-14    2.060564e-15    -0.03724767 -0.02930855</span></span>
<span id="cb88-20"><a href="predictive-tasks-using-bmbstats.html#cb88-20"></a><span class="co">#&gt;            MAE  1.534398e+00    1.509623e+00     1.77622691  1.77362879</span></span>
<span id="cb88-21"><a href="predictive-tasks-using-bmbstats.html#cb88-21"></a><span class="co">#&gt;           RMSE  1.837539e+00    1.807043e+00     2.10648622  2.07925558</span></span>
<span id="cb88-22"><a href="predictive-tasks-using-bmbstats.html#cb88-22"></a><span class="co">#&gt;           PPER  4.925435e-01    5.041349e-01     0.44022003  0.40113906</span></span>
<span id="cb88-23"><a href="predictive-tasks-using-bmbstats.html#cb88-23"></a><span class="co">#&gt;  SESOI to RMSE  1.359326e+00    1.362863e+00     1.16912846  1.22806404</span></span>
<span id="cb88-24"><a href="predictive-tasks-using-bmbstats.html#cb88-24"></a><span class="co">#&gt;      R-squared  9.108623e-01    9.137963e-01     0.88289646  0.89017328</span></span>
<span id="cb88-25"><a href="predictive-tasks-using-bmbstats.html#cb88-25"></a><span class="co">#&gt;         MinErr -3.676547e+00   -4.335315e+00    -4.57284164 -2.99135803</span></span>
<span id="cb88-26"><a href="predictive-tasks-using-bmbstats.html#cb88-26"></a><span class="co">#&gt;         MaxErr  3.819068e+00    4.380287e+00     4.43506709  2.54927044</span></span>
<span id="cb88-27"><a href="predictive-tasks-using-bmbstats.html#cb88-27"></a><span class="co">#&gt;      MaxAbsErr  3.819068e+00    4.380287e+00     4.57284164  3.45414085</span></span>
<span id="cb88-28"><a href="predictive-tasks-using-bmbstats.html#cb88-28"></a><span class="co">#&gt;          SD        min       max</span></span>
<span id="cb88-29"><a href="predictive-tasks-using-bmbstats.html#cb88-29"></a><span class="co">#&gt;  0.83265732 -2.3250491 1.3681763</span></span>
<span id="cb88-30"><a href="predictive-tasks-using-bmbstats.html#cb88-30"></a><span class="co">#&gt;  0.33144744  1.0364816 2.3883585</span></span>
<span id="cb88-31"><a href="predictive-tasks-using-bmbstats.html#cb88-31"></a><span class="co">#&gt;  0.29737351  1.3940723 2.7092065</span></span>
<span id="cb88-32"><a href="predictive-tasks-using-bmbstats.html#cb88-32"></a><span class="co">#&gt;  0.05824287  0.2221031 0.5513211</span></span>
<span id="cb88-33"><a href="predictive-tasks-using-bmbstats.html#cb88-33"></a><span class="co">#&gt;  0.18072558  0.9198745 1.7145206</span></span>
<span id="cb88-34"><a href="predictive-tasks-using-bmbstats.html#cb88-34"></a><span class="co">#&gt;  0.04568934  0.7776291 0.9626275</span></span>
<span id="cb88-35"><a href="predictive-tasks-using-bmbstats.html#cb88-35"></a><span class="co">#&gt;  0.81846093 -4.5728416 0.2782154</span></span>
<span id="cb88-36"><a href="predictive-tasks-using-bmbstats.html#cb88-36"></a><span class="co">#&gt;  1.17063338 -0.2033888 4.4350671</span></span>
<span id="cb88-37"><a href="predictive-tasks-using-bmbstats.html#cb88-37"></a><span class="co">#&gt;  0.57631575  2.3829256 4.5728416</span></span></code></pre></div>
<p>To plot the residuals, use <code>type="residuals"</code> in the <code>plot</code> function:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="predictive-tasks-using-bmbstats.html#cb89-1"></a><span class="kw">plot</span>(model4, <span class="st">&quot;residuals&quot;</span>)</span></code></pre></div>
<p><img src="14-Prediction-in-bmbstats_files/figure-html/unnamed-chunk-14-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>The following code will plot the training and testing residuals across cross-validation folds:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="predictive-tasks-using-bmbstats.html#cb90-1"></a><span class="kw">plot</span>(model4, <span class="st">&quot;training-residuals&quot;</span>)</span></code></pre></div>
<p><img src="14-Prediction-in-bmbstats_files/figure-html/unnamed-chunk-15-1.png" width="90%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="predictive-tasks-using-bmbstats.html#cb91-1"></a><span class="kw">plot</span>(model4, <span class="st">&quot;testing-residuals&quot;</span>)</span></code></pre></div>
<p><img src="14-Prediction-in-bmbstats_files/figure-html/unnamed-chunk-16-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>To plot bias-variance error decomposition across cross-validation folds use:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="predictive-tasks-using-bmbstats.html#cb92-1"></a><span class="kw">plot</span>(model4, <span class="st">&quot;bias-variance-index&quot;</span>)</span></code></pre></div>
<p><img src="14-Prediction-in-bmbstats_files/figure-html/unnamed-chunk-17-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>The above figure depicts bias-variance for each observation index. To plot against the outcome variable value use:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="predictive-tasks-using-bmbstats.html#cb93-1"></a><span class="kw">plot</span>(model4, <span class="st">&quot;bias-variance-observed&quot;</span>)</span></code></pre></div>
<p><img src="14-Prediction-in-bmbstats_files/figure-html/unnamed-chunk-18-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>Prediction error (i.e. residuals) can also be plotted as boxes, demonstrating the mean (i.e. bias) and spread (i.e. variance). To plot prediction error again outcome index use:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="predictive-tasks-using-bmbstats.html#cb94-1"></a><span class="kw">plot</span>(model4, <span class="st">&quot;prediction-index&quot;</span>)</span></code></pre></div>
<p><img src="14-Prediction-in-bmbstats_files/figure-html/unnamed-chunk-19-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>Similar to plotting bias-variance, prediction error distribution (actually, a spread or range) can be plotted against outcome variable value:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="predictive-tasks-using-bmbstats.html#cb95-1"></a><span class="kw">plot</span>(model4, <span class="st">&quot;prediction-observed&quot;</span>)</span></code></pre></div>
<p><img src="14-Prediction-in-bmbstats_files/figure-html/unnamed-chunk-20-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>And finally, to plot the performance estimator use:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="predictive-tasks-using-bmbstats.html#cb96-1"></a><span class="kw">plot</span>(model4, <span class="st">&quot;estimators&quot;</span>)</span></code></pre></div>
<p><img src="14-Prediction-in-bmbstats_files/figure-html/unnamed-chunk-21-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>Each of these plots can be customized using the <code>control=bmbstats::plot_control</code> argument and function.</p>
</div>
<div id="comparing-models" class="section level2" number="14.5">
<h2><span class="header-section-number">14.5</span> Comparing models</h2>
<p>Comparing models is beyond the scope of this book, but I will provide a short introduction using <code>bmbstats</code>. Let’s use our <code>model3</code> that used <code>rpart</code> Regression Tree, and <code>model4</code> that used 3rd degree polynomial fit, to plot the estimators range across cross-validation folds.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="predictive-tasks-using-bmbstats.html#cb97-1"></a>plot_data &lt;-<span class="st"> </span><span class="kw">rbind</span>(</span>
<span id="cb97-2"><a href="predictive-tasks-using-bmbstats.html#cb97-2"></a>  <span class="kw">data.frame</span>(<span class="dt">model =</span> <span class="st">&quot;rpart&quot;</span>, model3<span class="op">$</span>cross_validation<span class="op">$</span>performance<span class="op">$</span>summary<span class="op">$</span>overall),</span>
<span id="cb97-3"><a href="predictive-tasks-using-bmbstats.html#cb97-3"></a>  <span class="kw">data.frame</span>(<span class="dt">model =</span> <span class="st">&quot;poly&quot;</span>, model4<span class="op">$</span>cross_validation<span class="op">$</span>performance<span class="op">$</span>summary<span class="op">$</span>overall)</span>
<span id="cb97-4"><a href="predictive-tasks-using-bmbstats.html#cb97-4"></a>)</span>
<span id="cb97-5"><a href="predictive-tasks-using-bmbstats.html#cb97-5"></a></span>
<span id="cb97-6"><a href="predictive-tasks-using-bmbstats.html#cb97-6"></a>plot_data</span>
<span id="cb97-7"><a href="predictive-tasks-using-bmbstats.html#cb97-7"></a><span class="co">#&gt;    model        metric      training training.pooled testing.pooled        mean</span></span>
<span id="cb97-8"><a href="predictive-tasks-using-bmbstats.html#cb97-8"></a><span class="co">#&gt; 1  rpart           MBE  2.030618e-16   -3.045865e-16     0.03760974  0.03641386</span></span>
<span id="cb97-9"><a href="predictive-tasks-using-bmbstats.html#cb97-9"></a><span class="co">#&gt; 2  rpart           MAE  2.023389e+00    2.268546e+00     2.60389737  2.57549008</span></span>
<span id="cb97-10"><a href="predictive-tasks-using-bmbstats.html#cb97-10"></a><span class="co">#&gt; 3  rpart          RMSE  2.591359e+00    2.765355e+00     3.29362285  3.19456487</span></span>
<span id="cb97-11"><a href="predictive-tasks-using-bmbstats.html#cb97-11"></a><span class="co">#&gt; 4  rpart          PPER  3.621870e-01    3.437038e-01     0.29087228  0.27713101</span></span>
<span id="cb97-12"><a href="predictive-tasks-using-bmbstats.html#cb97-12"></a><span class="co">#&gt; 5  rpart SESOI to RMSE  9.639014e-01    8.905739e-01     0.74773376  0.83310652</span></span>
<span id="cb97-13"><a href="predictive-tasks-using-bmbstats.html#cb97-13"></a><span class="co">#&gt; 6  rpart     R-squared  8.227265e-01    7.981214e-01     0.71366153  0.74453263</span></span>
<span id="cb97-14"><a href="predictive-tasks-using-bmbstats.html#cb97-14"></a><span class="co">#&gt; 7  rpart        MinErr -5.699018e+00   -6.168662e+00    -9.88715278 -4.49333669</span></span>
<span id="cb97-15"><a href="predictive-tasks-using-bmbstats.html#cb97-15"></a><span class="co">#&gt; 8  rpart        MaxErr  6.097584e+00    6.427283e+00     7.22167137  4.47699323</span></span>
<span id="cb97-16"><a href="predictive-tasks-using-bmbstats.html#cb97-16"></a><span class="co">#&gt; 9  rpart     MaxAbsErr  6.097584e+00    6.427283e+00     9.88715278  5.86162382</span></span>
<span id="cb97-17"><a href="predictive-tasks-using-bmbstats.html#cb97-17"></a><span class="co">#&gt; 10  poly           MBE -1.299275e-14    2.060564e-15    -0.03724767 -0.02930855</span></span>
<span id="cb97-18"><a href="predictive-tasks-using-bmbstats.html#cb97-18"></a><span class="co">#&gt; 11  poly           MAE  1.534398e+00    1.509623e+00     1.77622691  1.77362879</span></span>
<span id="cb97-19"><a href="predictive-tasks-using-bmbstats.html#cb97-19"></a><span class="co">#&gt; 12  poly          RMSE  1.837539e+00    1.807043e+00     2.10648622  2.07925558</span></span>
<span id="cb97-20"><a href="predictive-tasks-using-bmbstats.html#cb97-20"></a><span class="co">#&gt; 13  poly          PPER  4.925435e-01    5.041349e-01     0.44022003  0.40113906</span></span>
<span id="cb97-21"><a href="predictive-tasks-using-bmbstats.html#cb97-21"></a><span class="co">#&gt; 14  poly SESOI to RMSE  1.359326e+00    1.362863e+00     1.16912846  1.22806404</span></span>
<span id="cb97-22"><a href="predictive-tasks-using-bmbstats.html#cb97-22"></a><span class="co">#&gt; 15  poly     R-squared  9.108623e-01    9.137963e-01     0.88289646  0.89017328</span></span>
<span id="cb97-23"><a href="predictive-tasks-using-bmbstats.html#cb97-23"></a><span class="co">#&gt; 16  poly        MinErr -3.676547e+00   -4.335315e+00    -4.57284164 -2.99135803</span></span>
<span id="cb97-24"><a href="predictive-tasks-using-bmbstats.html#cb97-24"></a><span class="co">#&gt; 17  poly        MaxErr  3.819068e+00    4.380287e+00     4.43506709  2.54927044</span></span>
<span id="cb97-25"><a href="predictive-tasks-using-bmbstats.html#cb97-25"></a><span class="co">#&gt; 18  poly     MaxAbsErr  3.819068e+00    4.380287e+00     4.57284164  3.45414085</span></span>
<span id="cb97-26"><a href="predictive-tasks-using-bmbstats.html#cb97-26"></a><span class="co">#&gt;            SD        min        max</span></span>
<span id="cb97-27"><a href="predictive-tasks-using-bmbstats.html#cb97-27"></a><span class="co">#&gt; 1  1.38472089 -3.5600378  2.4319242</span></span>
<span id="cb97-28"><a href="predictive-tasks-using-bmbstats.html#cb97-28"></a><span class="co">#&gt; 2  0.60425150  0.9905252  3.7964691</span></span>
<span id="cb97-29"><a href="predictive-tasks-using-bmbstats.html#cb97-29"></a><span class="co">#&gt; 3  0.67699316  1.1382304  4.6196434</span></span>
<span id="cb97-30"><a href="predictive-tasks-using-bmbstats.html#cb97-30"></a><span class="co">#&gt; 4  0.07822901  0.1429604  0.6357025</span></span>
<span id="cb97-31"><a href="predictive-tasks-using-bmbstats.html#cb97-31"></a><span class="co">#&gt; 5  0.26906599  0.5367524  2.2239463</span></span>
<span id="cb97-32"><a href="predictive-tasks-using-bmbstats.html#cb97-32"></a><span class="co">#&gt; 6  0.13595473  0.3724261  0.9682861</span></span>
<span id="cb97-33"><a href="predictive-tasks-using-bmbstats.html#cb97-33"></a><span class="co">#&gt; 7  2.25968230 -9.8871528 -0.4531138</span></span>
<span id="cb97-34"><a href="predictive-tasks-using-bmbstats.html#cb97-34"></a><span class="co">#&gt; 8  1.95348134 -0.3225821  7.2216714</span></span>
<span id="cb97-35"><a href="predictive-tasks-using-bmbstats.html#cb97-35"></a><span class="co">#&gt; 9  1.31129516  1.8902345  9.8871528</span></span>
<span id="cb97-36"><a href="predictive-tasks-using-bmbstats.html#cb97-36"></a><span class="co">#&gt; 10 0.83265732 -2.3250491  1.3681763</span></span>
<span id="cb97-37"><a href="predictive-tasks-using-bmbstats.html#cb97-37"></a><span class="co">#&gt; 11 0.33144744  1.0364816  2.3883585</span></span>
<span id="cb97-38"><a href="predictive-tasks-using-bmbstats.html#cb97-38"></a><span class="co">#&gt; 12 0.29737351  1.3940723  2.7092065</span></span>
<span id="cb97-39"><a href="predictive-tasks-using-bmbstats.html#cb97-39"></a><span class="co">#&gt; 13 0.05824287  0.2221031  0.5513211</span></span>
<span id="cb97-40"><a href="predictive-tasks-using-bmbstats.html#cb97-40"></a><span class="co">#&gt; 14 0.18072558  0.9198745  1.7145206</span></span>
<span id="cb97-41"><a href="predictive-tasks-using-bmbstats.html#cb97-41"></a><span class="co">#&gt; 15 0.04568934  0.7776291  0.9626275</span></span>
<span id="cb97-42"><a href="predictive-tasks-using-bmbstats.html#cb97-42"></a><span class="co">#&gt; 16 0.81846093 -4.5728416  0.2782154</span></span>
<span id="cb97-43"><a href="predictive-tasks-using-bmbstats.html#cb97-43"></a><span class="co">#&gt; 17 1.17063338 -0.2033888  4.4350671</span></span>
<span id="cb97-44"><a href="predictive-tasks-using-bmbstats.html#cb97-44"></a><span class="co">#&gt; 18 0.57631575  2.3829256  4.5728416</span></span></code></pre></div>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="predictive-tasks-using-bmbstats.html#cb98-1"></a><span class="kw">ggplot</span>(</span>
<span id="cb98-2"><a href="predictive-tasks-using-bmbstats.html#cb98-2"></a>  plot_data,</span>
<span id="cb98-3"><a href="predictive-tasks-using-bmbstats.html#cb98-3"></a>  <span class="kw">aes</span>(<span class="dt">y =</span> model, <span class="dt">x =</span> mean)</span>
<span id="cb98-4"><a href="predictive-tasks-using-bmbstats.html#cb98-4"></a>) <span class="op">+</span></span>
<span id="cb98-5"><a href="predictive-tasks-using-bmbstats.html#cb98-5"></a><span class="st">  </span><span class="kw">theme_bw</span>(<span class="dv">8</span>) <span class="op">+</span></span>
<span id="cb98-6"><a href="predictive-tasks-using-bmbstats.html#cb98-6"></a><span class="st">  </span><span class="kw">geom_errorbarh</span>(<span class="kw">aes</span>(<span class="dt">xmax =</span> max, <span class="dt">xmin =</span> min),</span>
<span id="cb98-7"><a href="predictive-tasks-using-bmbstats.html#cb98-7"></a>    <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb98-8"><a href="predictive-tasks-using-bmbstats.html#cb98-8"></a>    <span class="dt">height =</span> <span class="dv">0</span></span>
<span id="cb98-9"><a href="predictive-tasks-using-bmbstats.html#cb98-9"></a>  ) <span class="op">+</span></span>
<span id="cb98-10"><a href="predictive-tasks-using-bmbstats.html#cb98-10"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb98-11"><a href="predictive-tasks-using-bmbstats.html#cb98-11"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> training), <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">shape =</span> <span class="st">&quot;|&quot;</span>, <span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span></span>
<span id="cb98-12"><a href="predictive-tasks-using-bmbstats.html#cb98-12"></a><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="op">+</span></span>
<span id="cb98-13"><a href="predictive-tasks-using-bmbstats.html#cb98-13"></a><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;&quot;</span>) <span class="op">+</span></span>
<span id="cb98-14"><a href="predictive-tasks-using-bmbstats.html#cb98-14"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>metric, <span class="dt">scales =</span> <span class="st">&quot;free_x&quot;</span>)</span></code></pre></div>
<p><img src="14-Prediction-in-bmbstats_files/figure-html/unnamed-chunk-23-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>As can be seen from the figure, polynomial fit represents a more predictive model. But we can also perform statistical significance test using the cross-validation performance, for let’s say <code>RMSE</code> estimator. Since the CV folds are the same (which we achieved by using the same <code>seed</code> number), we can do dependent groups analysis. But before, let’s plot the CV estimates of the <code>RMSE</code>:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="predictive-tasks-using-bmbstats.html#cb99-1"></a>rmse_rpart &lt;-<span class="st"> </span><span class="kw">filter</span>(</span>
<span id="cb99-2"><a href="predictive-tasks-using-bmbstats.html#cb99-2"></a>  model3<span class="op">$</span>cross_validation<span class="op">$</span>performance<span class="op">$</span>folds<span class="op">$</span>testing,</span>
<span id="cb99-3"><a href="predictive-tasks-using-bmbstats.html#cb99-3"></a>  metric <span class="op">==</span><span class="st"> &quot;RMSE&quot;</span></span>
<span id="cb99-4"><a href="predictive-tasks-using-bmbstats.html#cb99-4"></a>)</span>
<span id="cb99-5"><a href="predictive-tasks-using-bmbstats.html#cb99-5"></a><span class="kw">head</span>(rmse_rpart)</span>
<span id="cb99-6"><a href="predictive-tasks-using-bmbstats.html#cb99-6"></a><span class="co">#&gt;                 fold metric    value</span></span>
<span id="cb99-7"><a href="predictive-tasks-using-bmbstats.html#cb99-7"></a><span class="co">#&gt; RMSE...1 Fold1.Rep01   RMSE 3.535807</span></span>
<span id="cb99-8"><a href="predictive-tasks-using-bmbstats.html#cb99-8"></a><span class="co">#&gt; RMSE...2 Fold2.Rep01   RMSE 1.138230</span></span>
<span id="cb99-9"><a href="predictive-tasks-using-bmbstats.html#cb99-9"></a><span class="co">#&gt; RMSE...3 Fold3.Rep01   RMSE 3.175505</span></span>
<span id="cb99-10"><a href="predictive-tasks-using-bmbstats.html#cb99-10"></a><span class="co">#&gt; RMSE...4 Fold4.Rep01   RMSE 2.995586</span></span>
<span id="cb99-11"><a href="predictive-tasks-using-bmbstats.html#cb99-11"></a><span class="co">#&gt; RMSE...5 Fold5.Rep01   RMSE 3.739492</span></span>
<span id="cb99-12"><a href="predictive-tasks-using-bmbstats.html#cb99-12"></a><span class="co">#&gt; RMSE...6 Fold1.Rep02   RMSE 3.931772</span></span></code></pre></div>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="predictive-tasks-using-bmbstats.html#cb100-1"></a>rmse_poly &lt;-<span class="st"> </span><span class="kw">filter</span>(</span>
<span id="cb100-2"><a href="predictive-tasks-using-bmbstats.html#cb100-2"></a>  model4<span class="op">$</span>cross_validation<span class="op">$</span>performance<span class="op">$</span>folds<span class="op">$</span>testing,</span>
<span id="cb100-3"><a href="predictive-tasks-using-bmbstats.html#cb100-3"></a>  metric <span class="op">==</span><span class="st"> &quot;RMSE&quot;</span></span>
<span id="cb100-4"><a href="predictive-tasks-using-bmbstats.html#cb100-4"></a>)</span>
<span id="cb100-5"><a href="predictive-tasks-using-bmbstats.html#cb100-5"></a><span class="kw">head</span>(rmse_poly)</span>
<span id="cb100-6"><a href="predictive-tasks-using-bmbstats.html#cb100-6"></a><span class="co">#&gt;                 fold metric    value</span></span>
<span id="cb100-7"><a href="predictive-tasks-using-bmbstats.html#cb100-7"></a><span class="co">#&gt; RMSE...1 Fold1.Rep01   RMSE 1.745409</span></span>
<span id="cb100-8"><a href="predictive-tasks-using-bmbstats.html#cb100-8"></a><span class="co">#&gt; RMSE...2 Fold2.Rep01   RMSE 2.408312</span></span>
<span id="cb100-9"><a href="predictive-tasks-using-bmbstats.html#cb100-9"></a><span class="co">#&gt; RMSE...3 Fold3.Rep01   RMSE 2.039587</span></span>
<span id="cb100-10"><a href="predictive-tasks-using-bmbstats.html#cb100-10"></a><span class="co">#&gt; RMSE...4 Fold4.Rep01   RMSE 2.670888</span></span>
<span id="cb100-11"><a href="predictive-tasks-using-bmbstats.html#cb100-11"></a><span class="co">#&gt; RMSE...5 Fold5.Rep01   RMSE 2.070925</span></span>
<span id="cb100-12"><a href="predictive-tasks-using-bmbstats.html#cb100-12"></a><span class="co">#&gt; RMSE...6 Fold1.Rep02   RMSE 2.082951</span></span></code></pre></div>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="predictive-tasks-using-bmbstats.html#cb101-1"></a>rmse_data &lt;-<span class="st"> </span><span class="kw">rbind</span>(</span>
<span id="cb101-2"><a href="predictive-tasks-using-bmbstats.html#cb101-2"></a>  <span class="kw">data.frame</span>(<span class="dt">model =</span> <span class="st">&quot;rpart&quot;</span>, <span class="dt">value =</span> rmse_rpart<span class="op">$</span>value),</span>
<span id="cb101-3"><a href="predictive-tasks-using-bmbstats.html#cb101-3"></a>  <span class="kw">data.frame</span>(<span class="dt">model =</span> <span class="st">&quot;poly&quot;</span>, <span class="dt">value =</span> rmse_poly<span class="op">$</span>value)</span>
<span id="cb101-4"><a href="predictive-tasks-using-bmbstats.html#cb101-4"></a>)</span>
<span id="cb101-5"><a href="predictive-tasks-using-bmbstats.html#cb101-5"></a></span>
<span id="cb101-6"><a href="predictive-tasks-using-bmbstats.html#cb101-6"></a>bmbstats<span class="op">::</span><span class="kw">plot_raincloud</span>(</span>
<span id="cb101-7"><a href="predictive-tasks-using-bmbstats.html#cb101-7"></a>  rmse_data,</span>
<span id="cb101-8"><a href="predictive-tasks-using-bmbstats.html#cb101-8"></a>  <span class="dt">value =</span> <span class="st">&quot;value&quot;</span>,</span>
<span id="cb101-9"><a href="predictive-tasks-using-bmbstats.html#cb101-9"></a>  <span class="dt">value_label =</span> <span class="st">&quot;RMSE&quot;</span>,</span>
<span id="cb101-10"><a href="predictive-tasks-using-bmbstats.html#cb101-10"></a>  <span class="dt">groups =</span> <span class="st">&quot;model&quot;</span></span>
<span id="cb101-11"><a href="predictive-tasks-using-bmbstats.html#cb101-11"></a>)</span></code></pre></div>
<p><img src="14-Prediction-in-bmbstats_files/figure-html/unnamed-chunk-26-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>And we can finally perform the dependent groups analysis:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="predictive-tasks-using-bmbstats.html#cb102-1"></a>rmse_perf &lt;-<span class="st"> </span>bmbstats<span class="op">::</span><span class="kw">compare_dependent_groups</span>(</span>
<span id="cb102-2"><a href="predictive-tasks-using-bmbstats.html#cb102-2"></a>  <span class="dt">pre =</span> rmse_rpart<span class="op">$</span>value,</span>
<span id="cb102-3"><a href="predictive-tasks-using-bmbstats.html#cb102-3"></a>  <span class="dt">post =</span> rmse_poly<span class="op">$</span>value</span>
<span id="cb102-4"><a href="predictive-tasks-using-bmbstats.html#cb102-4"></a>)</span>
<span id="cb102-5"><a href="predictive-tasks-using-bmbstats.html#cb102-5"></a></span>
<span id="cb102-6"><a href="predictive-tasks-using-bmbstats.html#cb102-6"></a>rmse_perf</span>
<span id="cb102-7"><a href="predictive-tasks-using-bmbstats.html#cb102-7"></a><span class="co">#&gt; Bootstrap with 2000 resamples and 95% bca confidence intervals.</span></span>
<span id="cb102-8"><a href="predictive-tasks-using-bmbstats.html#cb102-8"></a><span class="co">#&gt; </span></span>
<span id="cb102-9"><a href="predictive-tasks-using-bmbstats.html#cb102-9"></a><span class="co">#&gt;             estimator        value         lower        upper</span></span>
<span id="cb102-10"><a href="predictive-tasks-using-bmbstats.html#cb102-10"></a><span class="co">#&gt;           SESOI lower  -0.13539863   -0.17607368  -0.10927225</span></span>
<span id="cb102-11"><a href="predictive-tasks-using-bmbstats.html#cb102-11"></a><span class="co">#&gt;           SESOI upper   0.13539863    0.10927225   0.17607368</span></span>
<span id="cb102-12"><a href="predictive-tasks-using-bmbstats.html#cb102-12"></a><span class="co">#&gt;           SESOI range   0.27079726    0.21854450   0.35214735</span></span>
<span id="cb102-13"><a href="predictive-tasks-using-bmbstats.html#cb102-13"></a><span class="co">#&gt;           Mean change  -1.11530929   -1.32646984  -0.89455705</span></span>
<span id="cb102-14"><a href="predictive-tasks-using-bmbstats.html#cb102-14"></a><span class="co">#&gt;             SD change   0.76022031    0.60218574   0.99219147</span></span>
<span id="cb102-15"><a href="predictive-tasks-using-bmbstats.html#cb102-15"></a><span class="co">#&gt;            %CV change -68.16228649 -108.17299822 -50.50157994</span></span>
<span id="cb102-16"><a href="predictive-tasks-using-bmbstats.html#cb102-16"></a><span class="co">#&gt;              % change -30.38499807  -35.93194876 -19.10373522</span></span>
<span id="cb102-17"><a href="predictive-tasks-using-bmbstats.html#cb102-17"></a><span class="co">#&gt;                 Ratio   0.69615002    0.64068051   0.80896265</span></span>
<span id="cb102-18"><a href="predictive-tasks-using-bmbstats.html#cb102-18"></a><span class="co">#&gt;             Cohen&#39;s d  -1.64744544   -2.17427538  -1.02403852</span></span>
<span id="cb102-19"><a href="predictive-tasks-using-bmbstats.html#cb102-19"></a><span class="co">#&gt;                  CLES   0.06573315    0.02725296   0.16669235</span></span>
<span id="cb102-20"><a href="predictive-tasks-using-bmbstats.html#cb102-20"></a><span class="co">#&gt;                   OVL   0.41009713    0.27810102   0.60868406</span></span>
<span id="cb102-21"><a href="predictive-tasks-using-bmbstats.html#cb102-21"></a><span class="co">#&gt;  Mean change to SESOI  -4.11861361   -5.43568845  -2.56009630</span></span>
<span id="cb102-22"><a href="predictive-tasks-using-bmbstats.html#cb102-22"></a><span class="co">#&gt;    SD change to SESOI   2.80734121    2.51010263   3.14489890</span></span>
<span id="cb102-23"><a href="predictive-tasks-using-bmbstats.html#cb102-23"></a><span class="co">#&gt;                pLower   0.89827180    0.76960554   0.95994450</span></span>
<span id="cb102-24"><a href="predictive-tasks-using-bmbstats.html#cb102-24"></a><span class="co">#&gt;           pEquivalent   0.04856260    0.02183432   0.09330646</span></span>
<span id="cb102-25"><a href="predictive-tasks-using-bmbstats.html#cb102-25"></a><span class="co">#&gt;               pHigher   0.05316560    0.01748864   0.13895348</span></span></code></pre></div>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="predictive-tasks-using-bmbstats.html#cb103-1"></a><span class="co"># Do the statistical significance test</span></span>
<span id="cb103-2"><a href="predictive-tasks-using-bmbstats.html#cb103-2"></a>rmse_NHST &lt;-<span class="st"> </span>bmbstats<span class="op">::</span><span class="kw">bootstrap_NHST</span>(</span>
<span id="cb103-3"><a href="predictive-tasks-using-bmbstats.html#cb103-3"></a>  rmse_perf,</span>
<span id="cb103-4"><a href="predictive-tasks-using-bmbstats.html#cb103-4"></a>  <span class="dt">estimator =</span> <span class="st">&quot;Mean change&quot;</span>,</span>
<span id="cb103-5"><a href="predictive-tasks-using-bmbstats.html#cb103-5"></a>  <span class="dt">test =</span> <span class="st">&quot;two.sided&quot;</span>,</span>
<span id="cb103-6"><a href="predictive-tasks-using-bmbstats.html#cb103-6"></a>  <span class="dt">null_hypothesis =</span> <span class="dv">0</span></span>
<span id="cb103-7"><a href="predictive-tasks-using-bmbstats.html#cb103-7"></a>)</span>
<span id="cb103-8"><a href="predictive-tasks-using-bmbstats.html#cb103-8"></a></span>
<span id="cb103-9"><a href="predictive-tasks-using-bmbstats.html#cb103-9"></a>rmse_NHST</span>
<span id="cb103-10"><a href="predictive-tasks-using-bmbstats.html#cb103-10"></a><span class="co">#&gt; Null-hypothesis significance test for the `Mean change` estimator</span></span>
<span id="cb103-11"><a href="predictive-tasks-using-bmbstats.html#cb103-11"></a><span class="co">#&gt; Bootstrap result: Mean change=-1.115, 95% CI [-1.326, -0.895]</span></span>
<span id="cb103-12"><a href="predictive-tasks-using-bmbstats.html#cb103-12"></a><span class="co">#&gt; H0=0, test: two.sided</span></span>
<span id="cb103-13"><a href="predictive-tasks-using-bmbstats.html#cb103-13"></a><span class="co">#&gt; p=0.000499750124937531</span></span></code></pre></div>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="predictive-tasks-using-bmbstats.html#cb104-1"></a><span class="kw">plot</span>(rmse_NHST)</span></code></pre></div>
<p><img src="14-Prediction-in-bmbstats_files/figure-html/unnamed-chunk-29-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>So we can conclude that polynomial model has significantly better performance, using <code>RMSE</code> estimator, than Regression Tree model that cannot be explained as a pure (sampling) chance.</p>
<p>But to be honest, model comparison is beyond my current knowledge and I am not sure that comparing the estimators is the right approach. We could instead compare model residuals. Since CV folds are identical, we can perform dependent groups analysis as well. But before doing that, let’s plot the CV residuals:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="predictive-tasks-using-bmbstats.html#cb105-1"></a>resid_data &lt;-<span class="st"> </span><span class="kw">rbind</span>(</span>
<span id="cb105-2"><a href="predictive-tasks-using-bmbstats.html#cb105-2"></a>  <span class="kw">data.frame</span>(<span class="dt">model =</span> <span class="st">&quot;rpart&quot;</span>, <span class="dt">value =</span> model3<span class="op">$</span>cross_validation<span class="op">$</span>data<span class="op">$</span>testing<span class="op">$</span>residual),</span>
<span id="cb105-3"><a href="predictive-tasks-using-bmbstats.html#cb105-3"></a>  <span class="kw">data.frame</span>(<span class="dt">model =</span> <span class="st">&quot;poly&quot;</span>, <span class="dt">value =</span> model4<span class="op">$</span>cross_validation<span class="op">$</span>data<span class="op">$</span>testing<span class="op">$</span>residual)</span>
<span id="cb105-4"><a href="predictive-tasks-using-bmbstats.html#cb105-4"></a>)</span>
<span id="cb105-5"><a href="predictive-tasks-using-bmbstats.html#cb105-5"></a></span>
<span id="cb105-6"><a href="predictive-tasks-using-bmbstats.html#cb105-6"></a>bmbstats<span class="op">::</span><span class="kw">plot_raincloud</span>(</span>
<span id="cb105-7"><a href="predictive-tasks-using-bmbstats.html#cb105-7"></a>  resid_data,</span>
<span id="cb105-8"><a href="predictive-tasks-using-bmbstats.html#cb105-8"></a>  <span class="dt">value =</span> <span class="st">&quot;value&quot;</span>,</span>
<span id="cb105-9"><a href="predictive-tasks-using-bmbstats.html#cb105-9"></a>  <span class="dt">value_label =</span> <span class="st">&quot;CV residuals&quot;</span>,</span>
<span id="cb105-10"><a href="predictive-tasks-using-bmbstats.html#cb105-10"></a>  <span class="dt">groups =</span> <span class="st">&quot;model&quot;</span></span>
<span id="cb105-11"><a href="predictive-tasks-using-bmbstats.html#cb105-11"></a>)</span></code></pre></div>
<p><img src="14-Prediction-in-bmbstats_files/figure-html/unnamed-chunk-30-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>Or their difference:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="predictive-tasks-using-bmbstats.html#cb106-1"></a>bmbstats<span class="op">::</span><span class="kw">plot_raincloud</span>(</span>
<span id="cb106-2"><a href="predictive-tasks-using-bmbstats.html#cb106-2"></a>  <span class="kw">data.frame</span>(<span class="dt">diff =</span> model4<span class="op">$</span>cross_validation<span class="op">$</span>data<span class="op">$</span>testing<span class="op">$</span>residual <span class="op">-</span></span>
<span id="cb106-3"><a href="predictive-tasks-using-bmbstats.html#cb106-3"></a><span class="st">    </span>model3<span class="op">$</span>cross_validation<span class="op">$</span>data<span class="op">$</span>testing<span class="op">$</span>residual),</span>
<span id="cb106-4"><a href="predictive-tasks-using-bmbstats.html#cb106-4"></a>  <span class="dt">value =</span> <span class="st">&quot;diff&quot;</span>,</span>
<span id="cb106-5"><a href="predictive-tasks-using-bmbstats.html#cb106-5"></a>  <span class="dt">value_label =</span> <span class="st">&quot;CV residuals difference&quot;</span></span>
<span id="cb106-6"><a href="predictive-tasks-using-bmbstats.html#cb106-6"></a>)</span></code></pre></div>
<p><img src="14-Prediction-in-bmbstats_files/figure-html/unnamed-chunk-31-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>And we can finally perform the dependent groups analysis:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="predictive-tasks-using-bmbstats.html#cb107-1"></a>resid_perf &lt;-<span class="st"> </span>bmbstats<span class="op">::</span><span class="kw">compare_dependent_groups</span>(</span>
<span id="cb107-2"><a href="predictive-tasks-using-bmbstats.html#cb107-2"></a>  <span class="dt">pre =</span> model3<span class="op">$</span>cross_validation<span class="op">$</span>data<span class="op">$</span>testing<span class="op">$</span>residual,</span>
<span id="cb107-3"><a href="predictive-tasks-using-bmbstats.html#cb107-3"></a>  <span class="dt">post =</span> model4<span class="op">$</span>cross_validation<span class="op">$</span>data<span class="op">$</span>testing<span class="op">$</span>residual</span>
<span id="cb107-4"><a href="predictive-tasks-using-bmbstats.html#cb107-4"></a>)</span>
<span id="cb107-5"><a href="predictive-tasks-using-bmbstats.html#cb107-5"></a></span>
<span id="cb107-6"><a href="predictive-tasks-using-bmbstats.html#cb107-6"></a>resid_perf</span>
<span id="cb107-7"><a href="predictive-tasks-using-bmbstats.html#cb107-7"></a><span class="co">#&gt; Bootstrap with 2000 resamples and 95% bca confidence intervals.</span></span>
<span id="cb107-8"><a href="predictive-tasks-using-bmbstats.html#cb107-8"></a><span class="co">#&gt; </span></span>
<span id="cb107-9"><a href="predictive-tasks-using-bmbstats.html#cb107-9"></a><span class="co">#&gt;             estimator         value         lower         upper</span></span>
<span id="cb107-10"><a href="predictive-tasks-using-bmbstats.html#cb107-10"></a><span class="co">#&gt;           SESOI lower -6.596246e-01 -7.094456e-01 -6.153383e-01</span></span>
<span id="cb107-11"><a href="predictive-tasks-using-bmbstats.html#cb107-11"></a><span class="co">#&gt;           SESOI upper  6.596246e-01  6.153383e-01  7.094456e-01</span></span>
<span id="cb107-12"><a href="predictive-tasks-using-bmbstats.html#cb107-12"></a><span class="co">#&gt;           SESOI range  1.319249e+00  1.230677e+00  1.418891e+00</span></span>
<span id="cb107-13"><a href="predictive-tasks-using-bmbstats.html#cb107-13"></a><span class="co">#&gt;           Mean change -7.485741e-02 -3.678773e-01  2.267774e-01</span></span>
<span id="cb107-14"><a href="predictive-tasks-using-bmbstats.html#cb107-14"></a><span class="co">#&gt;             SD change  2.853680e+00  2.711641e+00  3.019229e+00</span></span>
<span id="cb107-15"><a href="predictive-tasks-using-bmbstats.html#cb107-15"></a><span class="co">#&gt;            %CV change -3.812154e+03 -1.203382e+06 -1.112797e+03</span></span>
<span id="cb107-16"><a href="predictive-tasks-using-bmbstats.html#cb107-16"></a><span class="co">#&gt;              % change -1.816303e+01 -8.898433e+01  6.621511e+01</span></span>
<span id="cb107-17"><a href="predictive-tasks-using-bmbstats.html#cb107-17"></a><span class="co">#&gt;                 Ratio  8.183697e-01  1.101567e-01  1.662151e+00</span></span>
<span id="cb107-18"><a href="predictive-tasks-using-bmbstats.html#cb107-18"></a><span class="co">#&gt;             Cohen&#39;s d -2.269697e-02 -1.118320e-01  6.659056e-02</span></span>
<span id="cb107-19"><a href="predictive-tasks-using-bmbstats.html#cb107-19"></a><span class="co">#&gt;                  CLES  4.923722e-01  4.625656e-01  5.225228e-01</span></span>
<span id="cb107-20"><a href="predictive-tasks-using-bmbstats.html#cb107-20"></a><span class="co">#&gt;                   OVL  9.909454e-01  9.689477e-01  9.999341e-01</span></span>
<span id="cb107-21"><a href="predictive-tasks-using-bmbstats.html#cb107-21"></a><span class="co">#&gt;  Mean change to SESOI -5.674243e-02 -2.795801e-01  1.664764e-01</span></span>
<span id="cb107-22"><a href="predictive-tasks-using-bmbstats.html#cb107-22"></a><span class="co">#&gt;    SD change to SESOI  2.163109e+00  2.042661e+00  2.298416e+00</span></span>
<span id="cb107-23"><a href="predictive-tasks-using-bmbstats.html#cb107-23"></a><span class="co">#&gt;                pLower  4.188782e-01  3.767829e-01  4.605721e-01</span></span>
<span id="cb107-24"><a href="predictive-tasks-using-bmbstats.html#cb107-24"></a><span class="co">#&gt;           pEquivalent  1.826035e-01  1.721664e-01  1.933616e-01</span></span>
<span id="cb107-25"><a href="predictive-tasks-using-bmbstats.html#cb107-25"></a><span class="co">#&gt;               pHigher  3.985183e-01  3.604887e-01  4.386698e-01</span></span></code></pre></div>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="predictive-tasks-using-bmbstats.html#cb108-1"></a><span class="co"># Do the statistical significance test</span></span>
<span id="cb108-2"><a href="predictive-tasks-using-bmbstats.html#cb108-2"></a>resid_NHST &lt;-<span class="st"> </span>bmbstats<span class="op">::</span><span class="kw">bootstrap_NHST</span>(</span>
<span id="cb108-3"><a href="predictive-tasks-using-bmbstats.html#cb108-3"></a>  resid_perf,</span>
<span id="cb108-4"><a href="predictive-tasks-using-bmbstats.html#cb108-4"></a>  <span class="dt">estimator =</span> <span class="st">&quot;Mean change&quot;</span>,</span>
<span id="cb108-5"><a href="predictive-tasks-using-bmbstats.html#cb108-5"></a>  <span class="dt">test =</span> <span class="st">&quot;two.sided&quot;</span>,</span>
<span id="cb108-6"><a href="predictive-tasks-using-bmbstats.html#cb108-6"></a>  <span class="dt">null_hypothesis =</span> <span class="dv">0</span></span>
<span id="cb108-7"><a href="predictive-tasks-using-bmbstats.html#cb108-7"></a>)</span>
<span id="cb108-8"><a href="predictive-tasks-using-bmbstats.html#cb108-8"></a></span>
<span id="cb108-9"><a href="predictive-tasks-using-bmbstats.html#cb108-9"></a>resid_NHST</span>
<span id="cb108-10"><a href="predictive-tasks-using-bmbstats.html#cb108-10"></a><span class="co">#&gt; Null-hypothesis significance test for the `Mean change` estimator</span></span>
<span id="cb108-11"><a href="predictive-tasks-using-bmbstats.html#cb108-11"></a><span class="co">#&gt; Bootstrap result: Mean change=-0.075, 95% CI [-0.368, 0.227]</span></span>
<span id="cb108-12"><a href="predictive-tasks-using-bmbstats.html#cb108-12"></a><span class="co">#&gt; H0=0, test: two.sided</span></span>
<span id="cb108-13"><a href="predictive-tasks-using-bmbstats.html#cb108-13"></a><span class="co">#&gt; p=0.617</span></span></code></pre></div>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="predictive-tasks-using-bmbstats.html#cb109-1"></a><span class="kw">plot</span>(resid_NHST)</span></code></pre></div>
<p><img src="14-Prediction-in-bmbstats_files/figure-html/unnamed-chunk-34-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>According to Cross-Validation residuals analysis, the two models didn’t perform statistically different that can be attributed to chance.</p>
<p>It bears repeating that I am not sure either of these are valid model comparison methods, so use this only as an example. Model comparison also involves deciding about model complexity and selecting the simpler model.</p>
</div>
<div id="bootstrapping-model" class="section level2" number="14.6">
<h2><span class="header-section-number">14.6</span> Bootstrapping model</h2>
<p>Cross-validations is one technique that allows us to evaluate model performance on unseen data, check for model over-fitting, and finally to tune the model parameters (i.e. using tuning parameters, like we did by varying the polynomial degrees) to get the best predictive performance.</p>
<p>With statistical inferences we are interested in <em>generalizing</em> beyond our sample, to a bigger population from which the sample is taken. We can generalize model parameters (i.e. intercept and slope of parameter coefficients), but also model performance (i.e. what is the <em>true</em> relationship between two or more variables). We can thus bootstrap the above model to get confidence intervals for both parameters and performance estimators.</p>
<p>Let’s get the 95% bootstrapped CIs for the polynomial model:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="predictive-tasks-using-bmbstats.html#cb110-1"></a>model4.boot.coef &lt;-<span class="st"> </span>bmbstats<span class="op">::</span><span class="kw">bmbstats</span>(</span>
<span id="cb110-2"><a href="predictive-tasks-using-bmbstats.html#cb110-2"></a>  <span class="dt">data =</span> sinus_data, </span>
<span id="cb110-3"><a href="predictive-tasks-using-bmbstats.html#cb110-3"></a>  <span class="dt">estimator_function =</span> <span class="cf">function</span>(data, SESOI_lower, SESOI_upper, na.rm, init_boot) {</span>
<span id="cb110-4"><a href="predictive-tasks-using-bmbstats.html#cb110-4"></a>    model &lt;-<span class="st"> </span><span class="kw">lm</span>(observed_y <span class="op">~</span><span class="st"> </span><span class="kw">poly</span>(x, <span class="dv">3</span>), data)</span>
<span id="cb110-5"><a href="predictive-tasks-using-bmbstats.html#cb110-5"></a>    <span class="kw">coef</span>(model)</span>
<span id="cb110-6"><a href="predictive-tasks-using-bmbstats.html#cb110-6"></a>  }</span>
<span id="cb110-7"><a href="predictive-tasks-using-bmbstats.html#cb110-7"></a>)</span>
<span id="cb110-8"><a href="predictive-tasks-using-bmbstats.html#cb110-8"></a></span>
<span id="cb110-9"><a href="predictive-tasks-using-bmbstats.html#cb110-9"></a>model4.boot.coef</span>
<span id="cb110-10"><a href="predictive-tasks-using-bmbstats.html#cb110-10"></a><span class="co">#&gt; Bootstrap with 2000 resamples and 95% bca confidence intervals.</span></span>
<span id="cb110-11"><a href="predictive-tasks-using-bmbstats.html#cb110-11"></a><span class="co">#&gt; </span></span>
<span id="cb110-12"><a href="predictive-tasks-using-bmbstats.html#cb110-12"></a><span class="co">#&gt;    estimator      value     lower     upper</span></span>
<span id="cb110-13"><a href="predictive-tasks-using-bmbstats.html#cb110-13"></a><span class="co">#&gt;  (Intercept)  51.094279  48.87153  52.96739</span></span>
<span id="cb110-14"><a href="predictive-tasks-using-bmbstats.html#cb110-14"></a><span class="co">#&gt;  poly(x, 3)1  28.497988  19.59403  36.45944</span></span>
<span id="cb110-15"><a href="predictive-tasks-using-bmbstats.html#cb110-15"></a><span class="co">#&gt;  poly(x, 3)2 -18.194924 -23.94497 -13.14120</span></span>
<span id="cb110-16"><a href="predictive-tasks-using-bmbstats.html#cb110-16"></a><span class="co">#&gt;  poly(x, 3)3  -8.027118 -13.13937  -4.52746</span></span></code></pre></div>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="predictive-tasks-using-bmbstats.html#cb111-1"></a><span class="kw">plot</span>(model4.boot.coef)</span></code></pre></div>
<p><img src="14-Prediction-in-bmbstats_files/figure-html/unnamed-chunk-36-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>And here are the model performance estimators and their 95% bootstrap confidence intervals:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="predictive-tasks-using-bmbstats.html#cb112-1"></a>model4.boot.perf &lt;-<span class="st"> </span>bmbstats<span class="op">::</span><span class="kw">bmbstats</span>(</span>
<span id="cb112-2"><a href="predictive-tasks-using-bmbstats.html#cb112-2"></a>  <span class="dt">data =</span> sinus_data, </span>
<span id="cb112-3"><a href="predictive-tasks-using-bmbstats.html#cb112-3"></a>  <span class="dt">estimator_function =</span> <span class="cf">function</span>(data, SESOI_lower, SESOI_upper, na.rm, init_boot) {</span>
<span id="cb112-4"><a href="predictive-tasks-using-bmbstats.html#cb112-4"></a>    model &lt;-<span class="st"> </span><span class="kw">lm</span>(observed_y <span class="op">~</span><span class="st"> </span><span class="kw">poly</span>(x, <span class="dv">3</span>), data)</span>
<span id="cb112-5"><a href="predictive-tasks-using-bmbstats.html#cb112-5"></a>    </span>
<span id="cb112-6"><a href="predictive-tasks-using-bmbstats.html#cb112-6"></a>    <span class="co"># Return model performance metrics</span></span>
<span id="cb112-7"><a href="predictive-tasks-using-bmbstats.html#cb112-7"></a>    bmbstats<span class="op">::</span><span class="kw">performance_metrics</span>(</span>
<span id="cb112-8"><a href="predictive-tasks-using-bmbstats.html#cb112-8"></a>      <span class="dt">observed =</span> data<span class="op">$</span>observed_y,</span>
<span id="cb112-9"><a href="predictive-tasks-using-bmbstats.html#cb112-9"></a>      <span class="dt">predicted =</span> <span class="kw">predict</span>(model),</span>
<span id="cb112-10"><a href="predictive-tasks-using-bmbstats.html#cb112-10"></a>      <span class="dt">SESOI_lower =</span> SESOI_lower,</span>
<span id="cb112-11"><a href="predictive-tasks-using-bmbstats.html#cb112-11"></a>      <span class="dt">SESOI_upper =</span> SESOI_upper,</span>
<span id="cb112-12"><a href="predictive-tasks-using-bmbstats.html#cb112-12"></a>      <span class="dt">na.rm =</span> na.rm</span>
<span id="cb112-13"><a href="predictive-tasks-using-bmbstats.html#cb112-13"></a>    )</span>
<span id="cb112-14"><a href="predictive-tasks-using-bmbstats.html#cb112-14"></a>  }</span>
<span id="cb112-15"><a href="predictive-tasks-using-bmbstats.html#cb112-15"></a>)</span>
<span id="cb112-16"><a href="predictive-tasks-using-bmbstats.html#cb112-16"></a></span>
<span id="cb112-17"><a href="predictive-tasks-using-bmbstats.html#cb112-17"></a>model4.boot.perf</span>
<span id="cb112-18"><a href="predictive-tasks-using-bmbstats.html#cb112-18"></a><span class="co">#&gt; Bootstrap with 2000 resamples and 95% bca confidence intervals.</span></span>
<span id="cb112-19"><a href="predictive-tasks-using-bmbstats.html#cb112-19"></a><span class="co">#&gt; </span></span>
<span id="cb112-20"><a href="predictive-tasks-using-bmbstats.html#cb112-20"></a><span class="co">#&gt;      estimator         value         lower         upper</span></span>
<span id="cb112-21"><a href="predictive-tasks-using-bmbstats.html#cb112-21"></a><span class="co">#&gt;            MBE -1.299275e-14 -4.125793e-14  1.055661e-14</span></span>
<span id="cb112-22"><a href="predictive-tasks-using-bmbstats.html#cb112-22"></a><span class="co">#&gt;            MAE  1.534398e+00  1.290075e+00  2.119985e+00</span></span>
<span id="cb112-23"><a href="predictive-tasks-using-bmbstats.html#cb112-23"></a><span class="co">#&gt;           RMSE  1.837539e+00  1.620042e+00  2.370531e+00</span></span>
<span id="cb112-24"><a href="predictive-tasks-using-bmbstats.html#cb112-24"></a><span class="co">#&gt;           PPER  0.000000e+00            NA            NA</span></span>
<span id="cb112-25"><a href="predictive-tasks-using-bmbstats.html#cb112-25"></a><span class="co">#&gt;  SESOI to RMSE  0.000000e+00            NA            NA</span></span>
<span id="cb112-26"><a href="predictive-tasks-using-bmbstats.html#cb112-26"></a><span class="co">#&gt;      R-squared  9.108623e-01  8.286065e-01  9.396944e-01</span></span>
<span id="cb112-27"><a href="predictive-tasks-using-bmbstats.html#cb112-27"></a><span class="co">#&gt;         MinErr -3.676547e+00 -5.001168e+00 -3.035433e+00</span></span>
<span id="cb112-28"><a href="predictive-tasks-using-bmbstats.html#cb112-28"></a><span class="co">#&gt;         MaxErr  3.819068e+00  2.958894e+00  5.388544e+00</span></span>
<span id="cb112-29"><a href="predictive-tasks-using-bmbstats.html#cb112-29"></a><span class="co">#&gt;      MaxAbsErr  3.819068e+00  3.001014e+00  5.097689e+00</span></span></code></pre></div>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="predictive-tasks-using-bmbstats.html#cb113-1"></a><span class="kw">plot</span>(model4.boot.perf)</span></code></pre></div>
<p><img src="14-Prediction-in-bmbstats_files/figure-html/unnamed-chunk-38-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>It is important to remember that these model analysis are trying to answer different questions - one predictive and one inferential.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-R-mlr">
<p>Bischl, Bernd, Michel Lang, Lars Kotthoff, Julia Schiffner, Jakob Richter, Erich Studerus, Giuseppe Casalicchio, and Zachary M. Jones. 2016. “mlr: Machine Learning in R.” <em>Journal of Machine Learning Research</em> 17 (170): 1–5. <a href="http://jmlr.org/papers/v17/15-066.html">http://jmlr.org/papers/v17/15-066.html</a>.</p>
</div>
<div id="ref-R-caret">
<p>Kuhn, Max. 2020. <em>Caret: Classification and Regression Training</em>. <a href="https://CRAN.R-project.org/package=caret">https://CRAN.R-project.org/package=caret</a>.</p>
</div>
<div id="ref-R-mlr3">
<p>Lang, Michel, Martin Binder, Jakob Richter, Patrick Schratz, Florian Pfisterer, Stefan Coors, Quay Au, Giuseppe Casalicchio, Lars Kotthoff, and Bernd Bischl. 2019. “mlr3: A Modern Object-Oriented Machine Learning Framework in R.” <em>Journal of Open Source Software</em>, December. <a href="https://doi.org/10.21105/joss.01903">https://doi.org/10.21105/joss.01903</a>.</p>
</div>
<div id="ref-R-rpart">
<p>Therneau, Terry, and Beth Atkinson. 2019. <em>Rpart: Recursive Partitioning and Regression Trees</em>. <a href="https://CRAN.R-project.org/package=rpart">https://CRAN.R-project.org/package=rpart</a>.</p>
</div>
<div id="ref-R-hardhat">
<p>Vaughan, Davis, and Max Kuhn. 2020. <em>Hardhat: Construct Modeling Packages</em>. <a href="https://CRAN.R-project.org/package=hardhat">https://CRAN.R-project.org/package=hardhat</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="descriptive-tasks-using-bmbstats.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="validity-and-reliability.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({"sharing": true,"fontsettings": {"theme": "white","family": "sans","size": 2},"edit": {"link": "https://github.com/mladenjovanovic/bmbstats-book/14-Prediction-in-bmbstats.Rmd","text": "Edit"},"history": {"link": null,"text": null},"view": {"link": null,"text": null},"download": null,"toc": {"collapse": "subsection"}});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
